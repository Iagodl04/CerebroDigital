var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ke(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var c=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:function(){return t[i]}})}),n}function he(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ne={exports:{}},l=ne.exports={},d,L;function X(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=X}catch{d=X}try{typeof clearTimeout=="function"?L=clearTimeout:L=k}catch{L=k}})();function se(t){if(d===setTimeout)return setTimeout(t,0);if((d===X||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch{try{return d.call(null,t,0)}catch{return d.call(this,t,0)}}}function pe(t){if(L===clearTimeout)return clearTimeout(t);if((L===k||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(t);try{return L(t)}catch{try{return L.call(null,t)}catch{return L.call(this,t)}}}var N=[],$=!1,m,y=-1;function fe(){!$||!m||($=!1,m.length?N=m.concat(N):y=-1,N.length&&ie())}function ie(){if(!$){var t=se(fe);$=!0;for(var e=N.length;e;){for(m=N,N=[];++y<e;)m&&m[y].run();y=-1,e=N.length}m=null,$=!1,pe(t)}}l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];N.push(new oe(t,e)),N.length===1&&!$&&se(ie)};function oe(t,e){this.fun=t,this.array=e}oe.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function O(){}l.on=O,l.addListener=O,l.once=O,l.off=O,l.removeListener=O,l.removeAllListeners=O,l.emit=O,l.prependListener=O,l.prependOnceListener=O,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0};var Ie=ne.exports;const de=he(Ie);var D,V;function ae(){if(V)return D;V=1;var t={};return D=typeof de=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},D}var _,H;function ce(){if(H)return _;H=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,c=e-6;return _={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},_}var C={exports:{}},W;function Le(){return W||(W=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:c}=ce(),I=ae();e=t.exports={};const A=e.re=[],f=e.safeRe=[],s=e.src=[],o=e.safeSrc=[],r=e.t={};let E=0;const u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",c],[u,i]],le=g=>{for(const[R,T]of p)g=g.split(`${R}*`).join(`${R}{0,${T}}`).split(`${R}+`).join(`${R}{1,${T}}`);return g},a=(g,R,T)=>{const B=le(R),v=E++;I(g,v,R),r[g]=v,s[v]=R,o[v]=B,A[v]=new RegExp(R,T?"g":void 0),f[v]=new RegExp(B,T?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),a("MAINVERSION",`(${s[r.NUMERICIDENTIFIER]})\\.(${s[r.NUMERICIDENTIFIER]})\\.(${s[r.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${s[r.NUMERICIDENTIFIERLOOSE]})\\.(${s[r.NUMERICIDENTIFIERLOOSE]})\\.(${s[r.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${s[r.NONNUMERICIDENTIFIER]}|${s[r.NUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${s[r.NONNUMERICIDENTIFIER]}|${s[r.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASE",`(?:-(${s[r.PRERELEASEIDENTIFIER]}(?:\\.${s[r.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${s[r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[r.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",`${u}+`),a("BUILD",`(?:\\+(${s[r.BUILDIDENTIFIER]}(?:\\.${s[r.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${s[r.MAINVERSION]}${s[r.PRERELEASE]}?${s[r.BUILD]}?`),a("FULL",`^${s[r.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${s[r.MAINVERSIONLOOSE]}${s[r.PRERELEASELOOSE]}?${s[r.BUILD]}?`),a("LOOSE",`^${s[r.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${s[r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${s[r.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${s[r.XRANGEIDENTIFIER]})(?:\\.(${s[r.XRANGEIDENTIFIER]})(?:\\.(${s[r.XRANGEIDENTIFIER]})(?:${s[r.PRERELEASE]})?${s[r.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${s[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[r.XRANGEIDENTIFIERLOOSE]})(?:${s[r.PRERELEASELOOSE]})?${s[r.BUILD]}?)?)?`),a("XRANGE",`^${s[r.GTLT]}\\s*${s[r.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${s[r.GTLT]}\\s*${s[r.XRANGEPLAINLOOSE]}$`),a("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),a("COERCE",`${s[r.COERCEPLAIN]}(?:$|[^\\d])`),a("COERCEFULL",s[r.COERCEPLAIN]+`(?:${s[r.PRERELEASE]})?(?:${s[r.BUILD]})?(?:$|[^\\d])`),a("COERCERTL",s[r.COERCE],!0),a("COERCERTLFULL",s[r.COERCEFULL],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${s[r.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${s[r.LONETILDE]}${s[r.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${s[r.LONETILDE]}${s[r.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${s[r.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${s[r.LONECARET]}${s[r.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${s[r.LONECARET]}${s[r.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${s[r.GTLT]}\\s*(${s[r.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${s[r.GTLT]}\\s*(${s[r.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${s[r.GTLT]}\\s*(${s[r.LOOSEPLAIN]}|${s[r.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${s[r.XRANGEPLAIN]})\\s+-\\s+(${s[r.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${s[r.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[r.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C,C.exports)),C.exports}var F,z;function Re(){if(z)return F;z=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return F=n=>n?typeof n!="object"?t:n:e,F}var M,K;function Oe(){if(K)return M;K=1;const t=/^[0-9]+$/,e=(n,i)=>{if(typeof n=="number"&&typeof i=="number")return n===i?0:n<i?-1:1;const c=t.test(n),I=t.test(i);return c&&I&&(n=+n,i=+i),n===i?0:c&&!I?-1:I&&!c?1:n<i?-1:1};return M={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},M}var G,Y;function Ee(){if(Y)return G;Y=1;const t=ae(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=ce(),{safeRe:i,t:c}=Le(),I=Re(),{compareIdentifiers:A}=Oe();class f{constructor(o,r){if(r=I(r),o instanceof f){if(o.loose===!!r.loose&&o.includePrerelease===!!r.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",o,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const E=o.trim().match(r.loose?i[c.LOOSE]:i[c.FULL]);if(!E)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(u=>{if(/^[0-9]+$/.test(u)){const p=+u;if(p>=0&&p<n)return p}return u}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(t("SemVer.compare",this.version,this.options,o),!(o instanceof f)){if(typeof o=="string"&&o===this.version)return 0;o=new f(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof f||(o=new f(o,this.options)),this.major<o.major?-1:this.major>o.major?1:this.minor<o.minor?-1:this.minor>o.minor?1:this.patch<o.patch?-1:this.patch>o.patch?1:0}comparePre(o){if(o instanceof f||(o=new f(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let r=0;do{const E=this.prerelease[r],u=o.prerelease[r];if(t("prerelease compare",r,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return A(E,u)}while(++r)}compareBuild(o){o instanceof f||(o=new f(o,this.options));let r=0;do{const E=this.build[r],u=o.build[r];if(t("build compare",r,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return A(E,u)}while(++r)}inc(o,r,E){if(o.startsWith("pre")){if(!r&&E===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const u=`-${r}`.match(this.options.loose?i[c.PRERELEASELOOSE]:i[c.PRERELEASE]);if(!u||u[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,E),this.inc("pre",r,E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,E),this.inc("pre",r,E);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const u=Number(E)?1:0;if(this.prerelease.length===0)this.prerelease=[u];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(r===this.prerelease.join(".")&&E===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(u)}}if(r){let p=[r,u];E===!1&&(p=[r]),A(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${o}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return G=f,G}var U,q;function Ne(){if(q)return U;q=1;const t=Ee();return U=(e,n,i=!1)=>{if(e instanceof t)return e;try{return new t(e,n)}catch(c){if(!i)return null;throw c}},U}var j,Z;function me(){if(Z)return j;Z=1;const t=Ne();return j=(e,n)=>{const i=t(e,n);return i?i.version:null},j}var ge=me();const ve=re(ge);var x,J;function be(){if(J)return x;J=1;const t=Ee();return x=(e,n)=>new t(e,n).major,x}var $e=be();const Q=re($e);class Ae{bus;constructor(e){typeof e.getVersion!="function"||!ve(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):Q(e.getVersion())!==Q(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.2"}subscribe(e,n){this.bus.subscribe(e,n)}unsubscribe(e,n){this.bus.unsubscribe(e,n)}emit(e,...n){this.bus.emit(e,...n)}}class Te{handlers=new Map;getVersion(){return"3.3.2"}subscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).concat(n))}unsubscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).filter(i=>i!==n))}emit(e,...n){(this.handlers.get(e)||[]).forEach(i=>{try{i(n[0])}catch(c){console.error("could not invoke event listener",c)}})}}let w=null;function we(){return w!==null?w:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof window?._nc_event_bus<"u"?w=new Ae(window._nc_event_bus):w=window._nc_event_bus=new Te,w)}function Se(t,e){we().subscribe(t,e)}class P{static GLOBAL_SCOPE_VOLATILE="nextcloud_vol";static GLOBAL_SCOPE_PERSISTENT="nextcloud_per";scope;wrapped;constructor(e,n,i){this.scope=`${i?P.GLOBAL_SCOPE_PERSISTENT:P.GLOBAL_SCOPE_VOLATILE}_${btoa(e)}_`,this.wrapped=n}scopeKey(e){return`${this.scope}${e}`}setItem(e,n){this.wrapped.setItem(this.scopeKey(e),n)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}class ye{appId;persisted=!1;clearedOnLogout=!1;constructor(e){this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new P(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}function Pe(t){return new ye(t)}let S;const ue=[];function Be(){return S===void 0&&(S=document.head.dataset.requesttoken??null),S}function Ve(t){ue.push(t)}Se("csrf-token-update",t=>{S=t.token,ue.forEach(e=>{try{e(S)}catch(n){console.error("Error updating CSRF token observer",n)}})});Pe("public").persist().build();let b;function ee(t,e){return t?t.getAttribute(e):null}function De(){if(b!==void 0)return b;const t=document?.getElementsByTagName("head")[0];if(!t)return null;const e=ee(t,"data-user");return e===null?(b=null,b):(b={uid:e,displayName:ee(t,"data-user-displayname"),isAdmin:!!window._oc_isadmin},b)}var h=(t=>(t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Fatal=4]="Fatal",t))(h||{}),_e=Object.defineProperty,Ce=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fe=(t,e,n)=>(Ce(t,e+"",n),n);class Me{constructor(e){Fe(this,"context"),this.context=e||{}}formatMessage(e,n,i){let c="["+h[n].toUpperCase()+"] ";return i&&i.app&&(c+=i.app+": "),typeof e=="string"?c+e:(c+="Unexpected ".concat(e.name),e.message&&(c+=' "'.concat(e.message,'"')),n===h.Debug&&e.stack&&(c+=`

Stack trace:
`.concat(e.stack)),c)}log(e,n,i){var c,I;if(!(typeof((c=this.context)==null?void 0:c.level)=="number"&&e<((I=this.context)==null?void 0:I.level)))switch(typeof n=="object"&&i?.error===void 0&&(i.error=n),e){case h.Debug:console.debug(this.formatMessage(n,h.Debug,i),i);break;case h.Info:console.info(this.formatMessage(n,h.Info,i),i);break;case h.Warn:console.warn(this.formatMessage(n,h.Warn,i),i);break;case h.Error:console.error(this.formatMessage(n,h.Error,i),i);break;case h.Fatal:default:console.error(this.formatMessage(n,h.Fatal,i),i);break}}debug(e,n){this.log(h.Debug,e,Object.assign({},this.context,n))}info(e,n){this.log(h.Info,e,Object.assign({},this.context,n))}warn(e,n){this.log(h.Warn,e,Object.assign({},this.context,n))}error(e,n){this.log(h.Error,e,Object.assign({},this.context,n))}fatal(e,n){this.log(h.Fatal,e,Object.assign({},this.context,n))}}function Ge(t){return new Me(t)}var Ue=Object.defineProperty,je=(t,e,n)=>e in t?Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,te=(t,e,n)=>(je(t,typeof e!="symbol"?e+"":e,n),n);class xe{constructor(e){te(this,"context"),te(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=De();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,n=()=>{var i,c;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(c=(i=window._oc_config)==null?void 0:i.loglevel)!=null?c:h.Warn,window._oc_debug&&(e.context.level=h.Debug),document.removeEventListener("readystatechange",n)):document.addEventListener("readystatechange",n)};return n(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function He(){return new xe(Ge)}export{re as a,ke as b,Xe as c,Be as d,He as g,Ve as o,de as p};
//# sourceMappingURL=index-BH5XFfaS.chunk.mjs.map
