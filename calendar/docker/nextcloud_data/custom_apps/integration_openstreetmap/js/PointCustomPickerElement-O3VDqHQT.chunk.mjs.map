{"version":3,"file":"PointCustomPickerElement-O3VDqHQT.chunk.mjs","sources":["../node_modules/@nextcloud/vue/dist/chunks/NcEmptyContent-B8-90BSI.mjs","../node_modules/@nextcloud/vue/dist/chunks/referencePickerModal-CseuhGwX.mjs","../src/views/PointCustomPickerElement.vue"],"sourcesContent":["import '../assets/NcEmptyContent-CLjlZ-UT.css';\nimport { defineComponent, createElementBlock, openBlock, unref, createCommentVNode, renderSlot, createTextVNode, toDisplayString } from \"vue\";\nimport { c as createElementId } from \"./createElementId-DhjFt1I9.mjs\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\nconst _hoisted_1 = [\"aria-labelledby\"];\nconst _hoisted_2 = {\n  key: 0,\n  class: \"empty-content__icon\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_3 = [\"id\"];\nconst _hoisted_4 = {\n  key: 2,\n  class: \"empty-content__description\"\n};\nconst _hoisted_5 = {\n  key: 3,\n  class: \"empty-content__action\"\n};\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"NcEmptyContent\",\n  props: {\n    description: { default: \"\" },\n    name: { default: \"\" }\n  },\n  setup(__props) {\n    const nameId = createElementId();\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        \"aria-labelledby\": unref(nameId),\n        class: \"empty-content\",\n        role: \"note\"\n      }, [\n        _ctx.$slots.icon ? (openBlock(), createElementBlock(\"div\", _hoisted_2, [\n          renderSlot(_ctx.$slots, \"icon\", {}, void 0, true)\n        ])) : createCommentVNode(\"\", true),\n        _ctx.name !== \"\" || _ctx.$slots.name ? (openBlock(), createElementBlock(\"div\", {\n          key: 1,\n          id: unref(nameId),\n          class: \"empty-content__name\"\n        }, [\n          renderSlot(_ctx.$slots, \"name\", {}, () => [\n            createTextVNode(toDisplayString(_ctx.name), 1)\n          ], true)\n        ], 8, _hoisted_3)) : createCommentVNode(\"\", true),\n        _ctx.description !== \"\" || _ctx.$slots.description ? (openBlock(), createElementBlock(\"p\", _hoisted_4, [\n          renderSlot(_ctx.$slots, \"description\", {}, () => [\n            createTextVNode(toDisplayString(_ctx.description), 1)\n          ], true)\n        ])) : createCommentVNode(\"\", true),\n        _ctx.$slots.action ? (openBlock(), createElementBlock(\"div\", _hoisted_5, [\n          renderSlot(_ctx.$slots, \"action\", {}, void 0, true)\n        ])) : createCommentVNode(\"\", true)\n      ], 8, _hoisted_1);\n    };\n  }\n});\nconst NcEmptyContent = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-b101d636\"]]);\nexport {\n  NcEmptyContent as N\n};\n//# sourceMappingURL=NcEmptyContent-B8-90BSI.mjs.map\n","import '../assets/referencePickerModal-DWMAMaU3.css';\nimport { createElementBlock, openBlock, mergeProps, createElementVNode, createCommentVNode, toDisplayString, resolveComponent, createVNode, withCtx, defineComponent, inject, ref, useTemplateRef, nextTick, computed, watch, onBeforeUnmount, normalizeClass, createBlock, resolveDynamicComponent, normalizeStyle, createTextVNode, unref, withKeys, withModifiers, createApp } from \"vue\";\nimport { emit } from \"@nextcloud/event-bus\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\nimport { I as IconClose } from \"./Close-D6ngJ4t9.mjs\";\nimport { f as renderCustomPickerElement, b as destroyCustomPickerElement, c as isCustomPickerElementRegistered, j as hasFullWidth, i as isWidgetRegistered, h as hasInteractiveView, a as renderWidget, d as destroyWidget, g as getCustomPickerElementSize } from \"./customPickerElements-4pQTZUnk.mjs\";\nimport axios from \"@nextcloud/axios\";\nimport { loadState } from \"@nextcloud/initial-state\";\nimport { imagePath, generateOcsUrl } from \"@nextcloud/router\";\nimport { r as register, E as t8, a as t, F as t44, G as t39, H as t24, i as t41, I as t31, o as t19, J as t12 } from \"./_l10n-YZMLsK4O.mjs\";\nimport { l as logger } from \"./logger-D3RVzcfQ.mjs\";\nimport { N as NcEmptyContent } from \"./NcEmptyContent-B8-90BSI.mjs\";\nimport { _ as _sfc_main$a } from \"./NcHighlight.vue_vue_type_script_lang-DnWQDM_2.mjs\";\nimport { N as NcSelect } from \"./NcSelect-BUPzYWtk.mjs\";\nimport debounce from \"debounce\";\nimport { useElementSize, useIntersectionObserver } from \"@vueuse/core\";\nimport { routerKey, RouterLink } from \"vue-router\";\nimport { N as NcButton } from \"./NcButton-DkC5k3Lb.mjs\";\nimport { g as getRoute } from \"./autolink-U5pBzLgI.mjs\";\nimport { N as NcLoadingIcon } from \"./NcLoadingIcon-b_ajZ_nQ.mjs\";\nimport { _ as _sfc_main$b } from \"./NcTextField.vue_vue_type_script_setup_true_lang-DVAnIMOA.mjs\";\nimport { I as IconDotsHorizontal } from \"./NcActions-C-E6BGfZ.mjs\";\nimport { N as NcModal } from \"./NcModal-CvHjwuUy.mjs\";\nconst _sfc_main$9 = {\n  name: \"ArrowLeftIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nconst _hoisted_1$9 = [\"aria-hidden\", \"aria-label\"];\nconst _hoisted_2$7 = [\"fill\", \"width\", \"height\"];\nconst _hoisted_3$6 = { d: \"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\" };\nconst _hoisted_4$5 = { key: 0 };\nfunction _sfc_render$8(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", mergeProps(_ctx.$attrs, {\n    \"aria-hidden\": $props.title ? null : \"true\",\n    \"aria-label\": $props.title,\n    class: \"material-design-icon arrow-left-icon\",\n    role: \"img\",\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit(\"click\", $event))\n  }), [\n    (openBlock(), createElementBlock(\"svg\", {\n      fill: $props.fillColor,\n      class: \"material-design-icon__svg\",\n      width: $props.size,\n      height: $props.size,\n      viewBox: \"0 0 24 24\"\n    }, [\n      createElementVNode(\"path\", _hoisted_3$6, [\n        $props.title ? (openBlock(), createElementBlock(\"title\", _hoisted_4$5, toDisplayString($props.title), 1)) : createCommentVNode(\"\", true)\n      ])\n    ], 8, _hoisted_2$7))\n  ], 16, _hoisted_1$9);\n}\nconst ArrowLeftIcon = /* @__PURE__ */ _export_sfc(_sfc_main$9, [[\"render\", _sfc_render$8]]);\nconst _sfc_main$8 = {\n  name: \"NcCustomPickerElement\",\n  props: {\n    /**\n     * The reference provider\n     */\n    provider: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: [\n    \"cancel\",\n    \"submit\"\n  ],\n  data() {\n    return {\n      isRegistered: isCustomPickerElementRegistered(this.provider.id),\n      renderResult: null\n    };\n  },\n  mounted() {\n    if (this.isRegistered) {\n      this.renderElement();\n    }\n  },\n  beforeUnmount() {\n    if (this.isRegistered) {\n      destroyCustomPickerElement(this.provider.id, this.$el, this.renderResult);\n    }\n  },\n  methods: {\n    renderElement() {\n      if (this.$refs.domElement) {\n        this.$refs.domElement.innerHTML = \"\";\n      }\n      const renderFunctionResult = renderCustomPickerElement(this.$refs.domElement, { providerId: this.provider.id, accessible: false });\n      Promise.resolve(renderFunctionResult).then((result) => {\n        this.renderResult = result;\n        if (this.renderResult.object?._isVue && this.renderResult.object?.$on) {\n          this.renderResult.object.$on(\"submit\", this.onSubmit);\n          this.renderResult.object.$on(\"cancel\", this.onCancel);\n        }\n        this.renderResult.element.addEventListener(\"submit\", (e) => {\n          this.onSubmit(e.detail);\n        });\n        this.renderResult.element.addEventListener(\"cancel\", this.onCancel);\n      });\n    },\n    onSubmit(value) {\n      this.$emit(\"submit\", value);\n    },\n    onCancel() {\n      this.$emit(\"cancel\");\n    }\n  }\n};\nconst _hoisted_1$8 = { ref: \"domElement\" };\nfunction _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$8, null, 512);\n}\nconst NcCustomPickerElement = /* @__PURE__ */ _export_sfc(_sfc_main$8, [[\"render\", _sfc_render$7], [\"__scopeId\", \"data-v-e408867a\"]]);\nconst _sfc_main$7 = {\n  name: \"LinkVariantIcon\",\n  emits: [\"click\"],\n  props: {\n    title: {\n      type: String\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n};\nconst _hoisted_1$7 = [\"aria-hidden\", \"aria-label\"];\nconst _hoisted_2$6 = [\"fill\", \"width\", \"height\"];\nconst _hoisted_3$5 = { d: \"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z\" };\nconst _hoisted_4$4 = { key: 0 };\nfunction _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", mergeProps(_ctx.$attrs, {\n    \"aria-hidden\": $props.title ? null : \"true\",\n    \"aria-label\": $props.title,\n    class: \"material-design-icon link-variant-icon\",\n    role: \"img\",\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit(\"click\", $event))\n  }), [\n    (openBlock(), createElementBlock(\"svg\", {\n      fill: $props.fillColor,\n      class: \"material-design-icon__svg\",\n      width: $props.size,\n      height: $props.size,\n      viewBox: \"0 0 24 24\"\n    }, [\n      createElementVNode(\"path\", _hoisted_3$5, [\n        $props.title ? (openBlock(), createElementBlock(\"title\", _hoisted_4$4, toDisplayString($props.title), 1)) : createCommentVNode(\"\", true)\n      ])\n    ], 8, _hoisted_2$6))\n  ], 16, _hoisted_1$7);\n}\nconst LinkVariantIcon = /* @__PURE__ */ _export_sfc(_sfc_main$7, [[\"render\", _sfc_render$6]]);\nregister(t8);\nconst anyLinkProviderId = \"any-link\";\nconst anyLinkProvider = {\n  id: anyLinkProviderId,\n  title: t(\"Any link\"),\n  order: 0,\n  icon_url: imagePath(\"core\", \"filetypes/link.svg\")\n};\nwindow._vue_richtext_reference_providers ??= loadState(\"core\", \"reference-provider-list\", []);\nwindow._vue_richtext_reference_provider_timestamps ??= loadState(\"core\", \"reference-provider-timestamps\", {});\nfunction getProvider(providerId) {\n  if (providerId === anyLinkProviderId) {\n    return anyLinkProvider;\n  }\n  return getProviders().find((p) => p.id === providerId);\n}\nfunction getProviders() {\n  return window._vue_richtext_reference_providers.filter((p) => {\n    const keep = !!p.search_providers_ids && p.search_providers_ids.length > 0 || isCustomPickerElementRegistered(p.id);\n    if (!keep) {\n      logger.debug(`[smart picker] ${p.id} reference provider is discoverable but does not have any related search provider or custom picker component registered`);\n    }\n    return keep;\n  });\n}\nfunction sortProviders(providerList) {\n  const timestamps = window._vue_richtext_reference_provider_timestamps;\n  return providerList.sort((a, b) => {\n    return a.order === b.order ? 0 : a.order > b.order ? 1 : -1;\n  }).sort((a, b) => {\n    const ta = timestamps[a.id];\n    const tb = timestamps[b.id];\n    return ta === tb ? 0 : tb === void 0 ? -1 : ta === void 0 ? 1 : ta > tb ? -1 : 1;\n  });\n}\nfunction searchProvider(query, limit) {\n  const providers = getProviders();\n  const escapedQuery = query.replace(/[/\\-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n  const regexp = new RegExp(escapedQuery, \"i\");\n  const sortedProviders = sortProviders(providers);\n  const filteredSortedProviders = sortedProviders.filter((p) => {\n    return p.title.match(regexp);\n  });\n  const searchResult = limit ? filteredSortedProviders.slice(0, limit) : filteredSortedProviders;\n  if (query === \"\" || searchResult.length === 0) {\n    searchResult.push(anyLinkProvider);\n  }\n  return searchResult;\n}\nasync function touchProvider(providerId) {\n  const timestamp = Math.floor(Date.now() / 1e3);\n  const url = generateOcsUrl(\"references/provider/{providerId}\", { providerId });\n  await axios.put(url, { timestamp });\n  window._vue_richtext_reference_provider_timestamps[providerId] = timestamp;\n}\nregister(t39, t44);\n/*!\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nfunction isUrl(str) {\n  try {\n    return Boolean(new URL(str));\n  } catch {\n    return false;\n  }\n}\nconst _sfc_main$6 = {\n  name: \"NcProviderList\",\n  components: {\n    NcSelect,\n    NcHighlight: _sfc_main$a,\n    NcEmptyContent,\n    LinkVariantIcon\n  },\n  emits: [\n    \"selectProvider\",\n    \"submit\"\n  ],\n  data() {\n    return {\n      selectedProvider: null,\n      query: \"\",\n      multiselectPlaceholder: t(\"Select provider\"),\n      providerIconAlt: t(\"Provider icon\")\n    };\n  },\n  computed: {\n    options() {\n      const result = [];\n      if (this.query !== \"\" && isUrl(this.query)) {\n        result.push({\n          id: this.query,\n          title: this.query,\n          isLink: true\n        });\n      }\n      result.push(...searchProvider(this.query));\n      return result;\n    }\n  },\n  methods: {\n    focus() {\n      setTimeout(() => {\n        this.$refs[\"provider-select\"]?.$el?.querySelector(\"#provider-select-input\")?.focus();\n      }, 300);\n    },\n    onProviderSelected(p) {\n      if (p !== null) {\n        if (p.isLink) {\n          this.$emit(\"submit\", p.title);\n        } else {\n          this.$emit(\"selectProvider\", p);\n        }\n        this.selectedProvider = null;\n      }\n    },\n    onSearch(query) {\n      this.query = query;\n    }\n  }\n};\nconst _hoisted_1$6 = { class: \"provider-list\" };\nconst _hoisted_2$5 = {\n  key: 0,\n  class: \"provider\"\n};\nconst _hoisted_3$4 = {\n  key: 1,\n  class: \"provider\"\n};\nconst _hoisted_4$3 = [\"src\", \"alt\"];\nfunction _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LinkVariantIcon = resolveComponent(\"LinkVariantIcon\");\n  const _component_NcHighlight = resolveComponent(\"NcHighlight\");\n  const _component_NcSelect = resolveComponent(\"NcSelect\");\n  const _component_NcEmptyContent = resolveComponent(\"NcEmptyContent\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$6, [\n    createVNode(_component_NcSelect, {\n      ref: \"provider-select\",\n      modelValue: $data.selectedProvider,\n      \"onUpdate:modelValue\": [\n        _cache[0] || (_cache[0] = ($event) => $data.selectedProvider = $event),\n        $options.onProviderSelected\n      ],\n      class: \"provider-list--select\",\n      \"input-id\": \"provider-select-input\",\n      label: \"title\",\n      placeholder: $data.multiselectPlaceholder,\n      options: $options.options,\n      \"append-to-body\": false,\n      \"clear-search-on-select\": true,\n      \"clear-search-on-blur\": () => false,\n      filterable: false,\n      onSearch: $options.onSearch\n    }, {\n      option: withCtx((option) => [\n        option.isLink ? (openBlock(), createElementBlock(\"div\", _hoisted_2$5, [\n          createVNode(_component_LinkVariantIcon, {\n            class: \"link-icon\",\n            size: 20\n          }),\n          createElementVNode(\"span\", null, toDisplayString(option.title), 1)\n        ])) : (openBlock(), createElementBlock(\"div\", _hoisted_3$4, [\n          createElementVNode(\"img\", {\n            class: \"provider-icon\",\n            src: option.icon_url,\n            alt: $data.providerIconAlt\n          }, null, 8, _hoisted_4$3),\n          createVNode(_component_NcHighlight, {\n            class: \"option-text\",\n            search: $data.query,\n            text: option.title\n          }, null, 8, [\"search\", \"text\"])\n        ]))\n      ]),\n      _: 1\n    }, 8, [\"modelValue\", \"placeholder\", \"options\", \"onSearch\", \"onUpdate:modelValue\"]),\n    createVNode(_component_NcEmptyContent, { class: \"provider-list--empty-content\" }, {\n      icon: withCtx(() => [\n        createVNode(_component_LinkVariantIcon)\n      ]),\n      _: 1\n    })\n  ]);\n}\nconst NcProviderList = /* @__PURE__ */ _export_sfc(_sfc_main$6, [[\"render\", _sfc_render$5], [\"__scopeId\", \"data-v-90c6aa3b\"]]);\nregister();\nconst _hoisted_1$5 = [\"src\"];\nconst _hoisted_2$4 = { class: \"widget-default--details\" };\nconst _hoisted_3$3 = { class: \"widget-default--name\" };\nconst _hoisted_4$2 = { class: \"widget-default--link\" };\nconst IDLE_TIMEOUT = 3 * 60 * 1e3;\nconst _sfc_main$5 = /* @__PURE__ */ defineComponent({\n  __name: \"NcReferenceWidget\",\n  props: {\n    reference: {},\n    interactive: { type: Boolean, default: true },\n    interactiveOptIn: { type: Boolean, default: false }\n  },\n  setup(__props) {\n    const props = __props;\n    const router = inject(routerKey, null);\n    const isVisible = ref(false);\n    const customWidget = useTemplateRef(\"customWidget\");\n    const widgetRoot = useTemplateRef(\"widgetRoot\");\n    const { width } = useElementSize(widgetRoot);\n    useIntersectionObserver(widgetRoot, ([entry]) => {\n      nextTick(() => {\n        isVisible.value = entry.isIntersecting;\n      });\n    });\n    const showInteractive = ref(false);\n    const rendered = ref(false);\n    let idleTimeout = null;\n    const isInteractive = computed(() => {\n      return !props.interactiveOptIn && props.interactive || showInteractive.value;\n    });\n    const referenceHasFullWidth = computed(() => {\n      return hasFullWidth(props.reference.richObjectType);\n    });\n    const hasCustomWidget = computed(() => {\n      return isWidgetRegistered(props.reference.richObjectType);\n    });\n    const referenceHasInteractiveView = computed(() => {\n      return hasCustomWidget.value && hasInteractiveView(props.reference.richObjectType);\n    });\n    const noAccess = computed(() => {\n      return !props.reference.accessible;\n    });\n    const numberOfLines = computed(() => {\n      const lineCountOffsets = [450, 550, 650, Infinity];\n      return lineCountOffsets.findIndex((max) => width.value < max);\n    });\n    const descriptionStyle = computed(() => {\n      if (numberOfLines.value === 0) {\n        return {\n          display: \"none\"\n        };\n      }\n      const lineClamp = numberOfLines.value;\n      return {\n        lineClamp,\n        webkitLineClamp: lineClamp\n      };\n    });\n    const compactLink = computed(() => {\n      const link = props.reference.openGraphObject.link;\n      if (!link) {\n        return \"\";\n      }\n      if (link.startsWith(\"https://\")) {\n        return link.substring(8);\n      }\n      if (link.startsWith(\"http://\")) {\n        return link.substring(7);\n      }\n      return link;\n    });\n    const route = computed(() => {\n      return getRoute(router, props.reference.openGraphObject.link);\n    });\n    const referenceWidgetLinkComponent = computed(() => {\n      return route.value ? RouterLink : \"a\";\n    });\n    const referenceWidgetLinkProps = computed(() => {\n      return route.value ? { to: route.value } : { href: props.reference.openGraphObject.link, target: \"_blank\" };\n    });\n    watch(isVisible, (val) => {\n      if (!val) {\n        idleTimeout = setTimeout(() => {\n          if (!isVisible.value) {\n            destroyReferenceWidget();\n          }\n        }, IDLE_TIMEOUT);\n        return;\n      }\n      if (idleTimeout) {\n        clearTimeout(idleTimeout);\n        idleTimeout = null;\n      }\n      if (!rendered.value) {\n        renderReferenceWidget();\n      }\n    }, { immediate: true });\n    onBeforeUnmount(() => {\n      destroyReferenceWidget();\n    });\n    function enableInteractive() {\n      showInteractive.value = true;\n      renderReferenceWidget();\n    }\n    function renderReferenceWidget() {\n      if (!customWidget.value) {\n        return;\n      }\n      if (props.reference.richObjectType === \"open-graph\") {\n        return;\n      }\n      customWidget.value.innerHTML = \"\";\n      const widget = document.createElement(\"div\");\n      widget.style.width = \"100%\";\n      customWidget.value.appendChild(widget);\n      nextTick(() => {\n        renderWidget(widget, {\n          ...props.reference,\n          interactive: isInteractive.value\n        });\n        rendered.value = true;\n      });\n    }\n    function destroyReferenceWidget() {\n      if (rendered.value && widgetRoot.value) {\n        destroyWidget(props.reference.richObjectType, widgetRoot.value);\n        rendered.value = false;\n      }\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"widgetRoot\",\n        ref: widgetRoot,\n        class: normalizeClass({ \"toggle-interactive\": referenceHasInteractiveView.value && !isInteractive.value })\n      }, [\n        _ctx.reference && hasCustomWidget.value ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          ref_key: \"customWidget\",\n          ref: customWidget,\n          class: normalizeClass([\"widget-custom\", { \"full-width\": referenceHasFullWidth.value }])\n        }, null, 2)) : !noAccess.value && _ctx.reference && _ctx.reference.openGraphObject && !hasCustomWidget.value ? (openBlock(), createBlock(resolveDynamicComponent(referenceWidgetLinkComponent.value), mergeProps({ key: 1 }, referenceWidgetLinkProps.value, {\n          rel: \"noopener noreferrer\",\n          class: \"widget-default\"\n        }), {\n          default: withCtx(() => [\n            _ctx.reference.openGraphObject.thumb ? (openBlock(), createElementBlock(\"img\", {\n              key: 0,\n              class: \"widget-default--image\",\n              src: _ctx.reference.openGraphObject.thumb\n            }, null, 8, _hoisted_1$5)) : createCommentVNode(\"\", true),\n            createElementVNode(\"div\", _hoisted_2$4, [\n              createElementVNode(\"p\", _hoisted_3$3, toDisplayString(_ctx.reference.openGraphObject.name), 1),\n              createElementVNode(\"p\", {\n                class: \"widget-default--description\",\n                style: normalizeStyle(descriptionStyle.value)\n              }, toDisplayString(_ctx.reference.openGraphObject.description), 5),\n              createElementVNode(\"p\", _hoisted_4$2, toDisplayString(compactLink.value), 1)\n            ])\n          ]),\n          _: 1\n        }, 16)) : createCommentVNode(\"\", true),\n        _ctx.interactiveOptIn && referenceHasInteractiveView.value && !isInteractive.value ? (openBlock(), createBlock(NcButton, {\n          key: 2,\n          class: \"toggle-interactive--button\",\n          onClick: enableInteractive\n        }, {\n          default: withCtx(() => [\n            createTextVNode(toDisplayString(unref(t)(\"Enable interactive view\")), 1)\n          ]),\n          _: 1\n        })) : createCommentVNode(\"\", true)\n      ], 2);\n    };\n  }\n});\nconst NcReferenceWidget = /* @__PURE__ */ _export_sfc(_sfc_main$5, [[\"__scopeId\", \"data-v-8ce33442\"]]);\nregister(t24);\nconst _sfc_main$4 = {\n  name: \"NcRawLinkInput\",\n  components: {\n    LinkVariantIcon,\n    NcEmptyContent,\n    NcLoadingIcon,\n    NcReferenceWidget,\n    NcTextField: _sfc_main$b\n  },\n  props: {\n    /**\n     * The reference provider\n     */\n    provider: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: [\n    \"submit\"\n  ],\n  data() {\n    return {\n      inputValue: \"\",\n      loading: false,\n      reference: null,\n      abortController: null,\n      inputPlaceholder: t(\"Enter link\")\n    };\n  },\n  computed: {\n    isLinkValid() {\n      return isUrl(this.inputValue);\n    },\n    debouncedUpdateReference() {\n      return debounce(this.updateReference, 500);\n    }\n  },\n  methods: {\n    focus() {\n      this.$refs[\"url-input\"].$el.getElementsByTagName(\"input\")[0]?.focus();\n    },\n    onSubmit(e) {\n      const value = e.target.value;\n      if (this.isLinkValid) {\n        this.$emit(\"submit\", value);\n      }\n    },\n    onClear() {\n      this.inputValue = \"\";\n      this.reference = null;\n    },\n    onInput() {\n      this.reference = null;\n      if (this.abortController) {\n        this.abortController.abort();\n      }\n      if (this.isLinkValid) {\n        this.debouncedUpdateReference();\n      }\n    },\n    updateReference() {\n      this.loading = true;\n      this.abortController = new AbortController();\n      axios.get(generateOcsUrl(\"references/resolve\", 2) + \"?reference=\" + encodeURIComponent(this.inputValue), {\n        signal: this.abortController.signal\n      }).then((response) => {\n        this.reference = response.data.ocs.data.references[this.inputValue];\n      }).catch((error) => {\n        logger.error(\"[NcRawLinkInput] Failed to update reference\", { error });\n      }).then(() => {\n        this.loading = false;\n      });\n    }\n  }\n};\nconst _hoisted_1$4 = { class: \"raw-link\" };\nconst _hoisted_2$3 = { class: \"input-wrapper\" };\nconst _hoisted_3$2 = [\"src\"];\nfunction _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NcLoadingIcon = resolveComponent(\"NcLoadingIcon\");\n  const _component_LinkVariantIcon = resolveComponent(\"LinkVariantIcon\");\n  const _component_NcTextField = resolveComponent(\"NcTextField\");\n  const _component_NcReferenceWidget = resolveComponent(\"NcReferenceWidget\");\n  const _component_NcEmptyContent = resolveComponent(\"NcEmptyContent\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$4, [\n    createElementVNode(\"div\", _hoisted_2$3, [\n      createVNode(_component_NcTextField, {\n        ref: \"url-input\",\n        modelValue: $data.inputValue,\n        \"onUpdate:modelValue\": [\n          _cache[0] || (_cache[0] = ($event) => $data.inputValue = $event),\n          $options.onInput\n        ],\n        \"show-trailing-button\": $data.inputValue !== \"\",\n        label: $data.inputPlaceholder,\n        onTrailingButtonClick: $options.onClear,\n        onKeyup: withKeys($options.onSubmit, [\"enter\"])\n      }, {\n        default: withCtx(() => [\n          $data.loading ? (openBlock(), createBlock(_component_NcLoadingIcon, {\n            key: 0,\n            size: 16\n          })) : (openBlock(), createBlock(_component_LinkVariantIcon, {\n            key: 1,\n            size: 16\n          }))\n        ]),\n        _: 1\n      }, 8, [\"modelValue\", \"show-trailing-button\", \"label\", \"onTrailingButtonClick\", \"onUpdate:modelValue\", \"onKeyup\"])\n    ]),\n    $data.reference !== null ? (openBlock(), createBlock(_component_NcReferenceWidget, {\n      key: 0,\n      class: \"reference-widget\",\n      reference: $data.reference\n    }, null, 8, [\"reference\"])) : (openBlock(), createBlock(_component_NcEmptyContent, {\n      key: 1,\n      class: \"raw-link--empty-content\"\n    }, {\n      icon: withCtx(() => [\n        $props.provider.icon_url ? (openBlock(), createElementBlock(\"img\", {\n          key: 0,\n          class: \"provider-icon\",\n          src: $props.provider.icon_url\n        }, null, 8, _hoisted_3$2)) : (openBlock(), createBlock(_component_LinkVariantIcon, { key: 1 }))\n      ]),\n      _: 1\n    }))\n  ]);\n}\nconst NcRawLinkInput = /* @__PURE__ */ _export_sfc(_sfc_main$4, [[\"render\", _sfc_render$4], [\"__scopeId\", \"data-v-a0658f2a\"]]);\nconst _sfc_main$3 = {\n  name: \"NcSearchResult\",\n  components: {\n    NcHighlight: _sfc_main$a\n  },\n  props: {\n    /**\n     * Unified search result entry\n     */\n    entry: {\n      type: Object,\n      required: true\n    },\n    /**\n     * The query that led to getting this result\n     * Used to highlight the entry text\n     */\n    query: {\n      type: String,\n      required: true\n    }\n  }\n};\nconst _hoisted_1$3 = { class: \"result\" };\nconst _hoisted_2$2 = [\"src\"];\nconst _hoisted_3$1 = { class: \"result--content\" };\nconst _hoisted_4$1 = { class: \"result--content--name\" };\nconst _hoisted_5$1 = { class: \"result--content--subline\" };\nfunction _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NcHighlight = resolveComponent(\"NcHighlight\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$3, [\n    $props.entry.icon ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass([{ [$props.entry.icon]: true, rounded: $props.entry.rounded }, \"result--icon-class\"])\n    }, null, 2)) : (openBlock(), createElementBlock(\"img\", {\n      key: 1,\n      class: normalizeClass([\"result--image\", { rounded: $props.entry.rounded }]),\n      src: $props.entry.thumbnailUrl\n    }, null, 10, _hoisted_2$2)),\n    createElementVNode(\"div\", _hoisted_3$1, [\n      createElementVNode(\"span\", _hoisted_4$1, [\n        createVNode(_component_NcHighlight, {\n          search: $props.query,\n          text: $props.entry.title\n        }, null, 8, [\"search\", \"text\"])\n      ]),\n      createElementVNode(\"span\", _hoisted_5$1, [\n        createVNode(_component_NcHighlight, {\n          search: $props.query,\n          text: $props.entry.subline\n        }, null, 8, [\"search\", \"text\"])\n      ])\n    ])\n  ]);\n}\nconst NcSearchResult = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$3], [\"__scopeId\", \"data-v-059edcfb\"]]);\nregister(t31, t39, t41);\nconst LIMIT = 5;\nconst _sfc_main$2 = {\n  name: \"NcSearch\",\n  components: {\n    LinkVariantIcon,\n    DotsHorizontalIcon: IconDotsHorizontal,\n    NcEmptyContent,\n    NcSelect,\n    NcSearchResult\n  },\n  /* eslint vue/require-prop-comment: warn -- TODO: Add a proper doc block about what this props do */\n  props: {\n    /**\n     * The selected reference provider\n     */\n    provider: {\n      type: Object,\n      required: true\n    },\n    showEmptyContent: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * Placeholder of the search\n     */\n    searchPlaceholder: {\n      type: String,\n      default: null\n    }\n  },\n  emits: [\n    \"submit\"\n  ],\n  data() {\n    return {\n      searchQuery: \"\",\n      selectedResult: null,\n      resultsBySearchProvider: {},\n      searching: false,\n      searchingMoreOf: null,\n      abortController: null,\n      noOptionsText: t(\"Start typing to search\"),\n      providerIconAlt: t(\"Provider icon\")\n    };\n  },\n  computed: {\n    mySearchPlaceholder() {\n      return this.searchPlaceholder || t(\"Search\");\n    },\n    searchProviderIds() {\n      return this.provider.search_providers_ids;\n    },\n    options() {\n      if (this.searchQuery === \"\") {\n        return [];\n      }\n      const options = [];\n      if (isUrl(this.searchQuery)) {\n        options.push(this.rawLinkEntry);\n      }\n      options.push(...this.formattedSearchResults);\n      return options;\n    },\n    rawLinkEntry() {\n      return {\n        id: \"rawLinkEntry\",\n        resourceUrl: this.searchQuery,\n        isRawLink: true\n      };\n    },\n    formattedSearchResults() {\n      const results = [];\n      this.searchProviderIds.forEach((pid) => {\n        if (this.resultsBySearchProvider[pid].entries.length > 0) {\n          if (this.searchProviderIds.length > 1 || this.resultsBySearchProvider[pid].entries.length > 1) {\n            results.push({\n              id: \"groupTitle-\" + pid,\n              name: this.resultsBySearchProvider[pid].name,\n              isCustomGroupTitle: true,\n              providerId: pid\n            });\n          }\n          const providerEntriesWithId = this.resultsBySearchProvider[pid].entries.map((entry, index) => {\n            return {\n              id: \"provider-\" + pid + \"-entry-\" + index,\n              ...entry\n            };\n          });\n          results.push(...providerEntriesWithId);\n          if (this.resultsBySearchProvider[pid].isPaginated) {\n            results.push({\n              id: \"moreOf-\" + pid,\n              name: this.resultsBySearchProvider[pid].name,\n              isMore: true,\n              providerId: pid,\n              isLoading: this.searchingMoreOf === pid\n            });\n          }\n        }\n      });\n      return results;\n    },\n    debouncedUpdateSearch() {\n      return debounce(this.updateSearch, 500);\n    }\n  },\n  mounted() {\n    this.resetResults();\n  },\n  beforeUnmount() {\n    this.cancelSearchRequests();\n  },\n  methods: {\n    t,\n    resetResults() {\n      const resultsBySearchProvider = {};\n      this.searchProviderIds.forEach((pid) => {\n        resultsBySearchProvider[pid] = {\n          entries: []\n        };\n      });\n      this.resultsBySearchProvider = resultsBySearchProvider;\n    },\n    focus() {\n      setTimeout(() => {\n        this.$refs[\"search-select\"]?.$el?.querySelector(\"#search-select-input\")?.focus();\n      }, 300);\n    },\n    cancelSearchRequests() {\n      if (this.abortController) {\n        this.abortController.abort();\n      }\n    },\n    onSearchInput(query) {\n      this.searchQuery = query;\n      this.debouncedUpdateSearch();\n    },\n    onSelectResultSelected(item) {\n      if (item !== null) {\n        if (item.resourceUrl) {\n          this.cancelSearchRequests();\n          this.$emit(\"submit\", item.resourceUrl);\n        } else if (item.isMore) {\n          this.searchMoreOf(item.providerId).then(() => {\n            this.selectedResult = null;\n          });\n        }\n      }\n    },\n    searchMoreOf(searchProviderId) {\n      this.searchingMoreOf = searchProviderId;\n      this.cancelSearchRequests();\n      return this.searchProviders(searchProviderId);\n    },\n    updateSearch() {\n      this.cancelSearchRequests();\n      this.resetResults();\n      if (this.searchQuery === \"\") {\n        this.searching = false;\n        return;\n      }\n      return this.searchProviders();\n    },\n    searchProviders(searchProviderId = null) {\n      this.abortController = new AbortController();\n      this.searching = true;\n      const searchPromises = searchProviderId === null ? [...this.searchProviderIds].map((pid) => {\n        return this.searchOneProvider(pid);\n      }) : [this.searchOneProvider(searchProviderId, this.resultsBySearchProvider[searchProviderId]?.cursor ?? null)];\n      return Promise.allSettled(searchPromises).then((promises) => {\n        const isOneCanceled = !!promises.find((p) => {\n          return p.status === \"rejected\" && (p.reason.name === \"CanceledError\" || p.reason.code === \"ERR_CANCELED\");\n        });\n        if (!isOneCanceled) {\n          this.searching = false;\n          this.searchingMoreOf = null;\n        }\n      });\n    },\n    searchOneProvider(providerId, cursor = null) {\n      const url = cursor === null ? generateOcsUrl(\"search/providers/{providerId}/search?term={term}&limit={limit}\", { providerId, term: this.searchQuery, limit: LIMIT }) : generateOcsUrl(\"search/providers/{providerId}/search?term={term}&limit={limit}&cursor={cursor}\", { providerId, term: this.searchQuery, limit: LIMIT, cursor });\n      return axios.get(url, {\n        signal: this.abortController.signal\n      }).then((response) => {\n        const data = response.data.ocs.data;\n        this.resultsBySearchProvider[providerId].name = data.name;\n        this.resultsBySearchProvider[providerId].cursor = data.cursor;\n        this.resultsBySearchProvider[providerId].isPaginated = data.isPaginated;\n        this.resultsBySearchProvider[providerId].entries.push(...data.entries);\n      });\n    }\n  }\n};\nconst _hoisted_1$2 = {\n  key: 0,\n  class: \"custom-option\"\n};\nconst _hoisted_2$1 = { class: \"option-text\" };\nconst _hoisted_3 = {\n  key: 2,\n  class: \"custom-option group-name\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = { class: \"option-text\" };\nconst _hoisted_6 = {\n  key: 3,\n  class: \"custom-option\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"option-simple-icon icon-loading-small\"\n};\nconst _hoisted_8 = { class: \"option-text\" };\nconst _hoisted_9 = [\"alt\", \"src\"];\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LinkVariantIcon = resolveComponent(\"LinkVariantIcon\");\n  const _component_NcSearchResult = resolveComponent(\"NcSearchResult\");\n  const _component_DotsHorizontalIcon = resolveComponent(\"DotsHorizontalIcon\");\n  const _component_NcSelect = resolveComponent(\"NcSelect\");\n  const _component_NcEmptyContent = resolveComponent(\"NcEmptyContent\");\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([\"smart-picker-search\", { \"with-empty-content\": $props.showEmptyContent }])\n  }, [\n    createVNode(_component_NcSelect, {\n      ref: \"search-select\",\n      modelValue: $data.selectedResult,\n      \"onUpdate:modelValue\": [\n        _cache[0] || (_cache[0] = ($event) => $data.selectedResult = $event),\n        $options.onSelectResultSelected\n      ],\n      class: \"smart-picker-search--select\",\n      \"input-id\": \"search-select-input\",\n      label: \"name\",\n      placeholder: $options.mySearchPlaceholder,\n      options: $options.options,\n      \"append-to-body\": false,\n      \"close-on-select\": false,\n      \"clear-search-on-select\": false,\n      \"clear-search-on-blur\": () => false,\n      \"reset-focus-on-options-change\": false,\n      filterable: false,\n      autoscroll: true,\n      \"reset-on-options-change\": false,\n      loading: $data.searching,\n      onSearch: $options.onSearchInput\n    }, {\n      option: withCtx((option) => [\n        option.isRawLink ? (openBlock(), createElementBlock(\"div\", _hoisted_1$2, [\n          createVNode(_component_LinkVariantIcon, {\n            class: \"option-simple-icon\",\n            size: 20\n          }),\n          createElementVNode(\"span\", _hoisted_2$1, toDisplayString($options.t(\"Raw link {options}\", { options: option.resourceUrl })), 1)\n        ])) : option.resourceUrl ? (openBlock(), createBlock(_component_NcSearchResult, {\n          key: 1,\n          class: \"search-result\",\n          entry: option,\n          query: $data.searchQuery\n        }, null, 8, [\"entry\", \"query\"])) : option.isCustomGroupTitle ? (openBlock(), createElementBlock(\"span\", _hoisted_3, [\n          $props.provider.icon_url ? (openBlock(), createElementBlock(\"img\", {\n            key: 0,\n            class: \"provider-icon group-name-icon\",\n            src: $props.provider.icon_url\n          }, null, 8, _hoisted_4)) : createCommentVNode(\"\", true),\n          createElementVNode(\"span\", _hoisted_5, [\n            createElementVNode(\"strong\", null, toDisplayString(option.name), 1)\n          ])\n        ])) : option.isMore ? (openBlock(), createElementBlock(\"span\", _hoisted_6, [\n          option.isLoading ? (openBlock(), createElementBlock(\"span\", _hoisted_7)) : (openBlock(), createBlock(_component_DotsHorizontalIcon, {\n            key: 1,\n            class: \"option-simple-icon\",\n            size: 20\n          })),\n          createElementVNode(\"span\", _hoisted_8, toDisplayString($options.t('Load more \"{options}\"', { options: option.name })), 1)\n        ])) : createCommentVNode(\"\", true)\n      ]),\n      \"no-options\": withCtx(() => [\n        createTextVNode(toDisplayString($data.noOptionsText), 1)\n      ]),\n      _: 1\n    }, 8, [\"modelValue\", \"placeholder\", \"options\", \"loading\", \"onSearch\", \"onUpdate:modelValue\"]),\n    $props.showEmptyContent ? (openBlock(), createBlock(_component_NcEmptyContent, {\n      key: 0,\n      class: \"smart-picker-search--empty-content\"\n    }, {\n      icon: withCtx(() => [\n        $props.provider.icon_url ? (openBlock(), createElementBlock(\"img\", {\n          key: 0,\n          class: \"provider-icon\",\n          alt: $data.providerIconAlt,\n          src: $props.provider.icon_url\n        }, null, 8, _hoisted_9)) : (openBlock(), createBlock(_component_LinkVariantIcon, { key: 1 }))\n      ]),\n      _: 1\n    })) : createCommentVNode(\"\", true)\n  ], 2);\n}\nconst NcSearch = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$2], [\"__scopeId\", \"data-v-e8abf1d4\"]]);\nconst MODES = {\n  providerList: 1,\n  standardLinkInput: 2,\n  searchInput: 3,\n  customElement: 4\n};\nconst _sfc_main$1 = {\n  name: \"NcReferencePicker\",\n  components: {\n    NcCustomPickerElement,\n    NcProviderList,\n    NcRawLinkInput,\n    NcSearch\n  },\n  props: {\n    /**\n     * Provider to select on creation\n     * Default: null. Show the provider list\n     */\n    initialProvider: {\n      type: Object,\n      default: () => null\n    },\n    /**\n     * Optional width in pixels\n     * Default: 100%\n     */\n    width: {\n      type: Number,\n      default: null\n    },\n    /**\n     * Focus on the provider list select input on creation\n     * Default: true\n     */\n    focusOnCreate: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: [\n    \"cancel\",\n    \"cancelRawLink\",\n    \"cancelSearch\",\n    \"providerSelected\",\n    \"submit\"\n  ],\n  data() {\n    return {\n      MODES,\n      selectedProvider: this.initialProvider\n    };\n  },\n  computed: {\n    mode() {\n      return this.selectedProvider === null ? MODES.providerList : isCustomPickerElementRegistered(this.selectedProvider.id) ? MODES.customElement : this.selectedProvider.search_providers_ids ? MODES.searchInput : MODES.standardLinkInput;\n    },\n    pickerWrapperStyle() {\n      return {\n        width: this.width ? this.width + \"px\" : void 0\n      };\n    }\n  },\n  mounted() {\n    if (this.focusOnCreate) {\n      if (this.initialProvider) {\n        setTimeout(() => {\n          this.$refs[\"url-input\"]?.focus();\n        }, 300);\n      } else {\n        this.$nextTick(() => {\n          this.$refs[\"provider-list\"]?.focus();\n        });\n      }\n    }\n  },\n  methods: {\n    onEscapePressed() {\n      if (this.selectedProvider !== null) {\n        this.deselectProvider();\n      } else {\n        this.cancelProviderSelection();\n      }\n    },\n    onProviderSelected(provider) {\n      this.selectedProvider = provider;\n      this.$emit(\"providerSelected\", provider);\n      this.$nextTick(() => {\n        this.$refs[\"url-input\"]?.focus();\n      });\n    },\n    cancelCustomElement() {\n      this.deselectProvider();\n    },\n    cancelSearch() {\n      this.$emit(\"cancelSearch\", this.selectedProvider?.title);\n      this.deselectProvider();\n    },\n    cancelRawLinkInput() {\n      this.$emit(\"cancelRawLink\", this.selectedProvider?.title);\n      this.deselectProvider();\n    },\n    cancelProviderSelection() {\n      this.$emit(\"cancel\");\n    },\n    submitLink(link) {\n      if (this.selectedProvider !== null) {\n        touchProvider(this.selectedProvider.id);\n      }\n      this.$emit(\"submit\", link);\n      this.deselectProvider();\n    },\n    deselectProvider() {\n      this.selectedProvider = null;\n      this.$emit(\"providerSelected\", null);\n      setTimeout(() => {\n        this.$refs[\"provider-list\"]?.focus();\n      }, 300);\n    }\n  }\n};\nconst _hoisted_1$1 = {\n  key: 3,\n  class: \"custom-element-wrapper\"\n};\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NcProviderList = resolveComponent(\"NcProviderList\");\n  const _component_NcRawLinkInput = resolveComponent(\"NcRawLinkInput\");\n  const _component_NcSearch = resolveComponent(\"NcSearch\");\n  const _component_NcCustomPickerElement = resolveComponent(\"NcCustomPickerElement\");\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"reference-picker\",\n    style: normalizeStyle($options.pickerWrapperStyle),\n    tabindex: \"-1\",\n    onKeydown: _cache[0] || (_cache[0] = withKeys(withModifiers((...args) => $options.onEscapePressed && $options.onEscapePressed(...args), [\"stop\", \"prevent\"]), [\"esc\"]))\n  }, [\n    $options.mode === $data.MODES.providerList ? (openBlock(), createBlock(_component_NcProviderList, {\n      key: 0,\n      ref: \"provider-list\",\n      onSelectProvider: $options.onProviderSelected,\n      onSubmit: $options.submitLink,\n      onCancel: $options.cancelProviderSelection\n    }, null, 8, [\"onSelectProvider\", \"onSubmit\", \"onCancel\"])) : $options.mode === $data.MODES.standardLinkInput ? (openBlock(), createBlock(_component_NcRawLinkInput, {\n      key: 1,\n      ref: \"url-input\",\n      provider: $data.selectedProvider,\n      onSubmit: $options.submitLink,\n      onCancel: $options.cancelRawLinkInput\n    }, null, 8, [\"provider\", \"onSubmit\", \"onCancel\"])) : $options.mode === $data.MODES.searchInput ? (openBlock(), createBlock(_component_NcSearch, {\n      key: 2,\n      ref: \"url-input\",\n      provider: $data.selectedProvider,\n      onCancel: $options.cancelSearch,\n      onSubmit: $options.submitLink\n    }, null, 8, [\"provider\", \"onCancel\", \"onSubmit\"])) : $options.mode === $data.MODES.customElement ? (openBlock(), createElementBlock(\"div\", _hoisted_1$1, [\n      createVNode(_component_NcCustomPickerElement, {\n        provider: $data.selectedProvider,\n        class: \"custom-element\",\n        onSubmit: $options.submitLink,\n        onCancel: $options.cancelCustomElement\n      }, null, 8, [\"provider\", \"onSubmit\", \"onCancel\"])\n    ])) : createCommentVNode(\"\", true)\n  ], 36);\n}\nconst NcReferencePicker = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1], [\"__scopeId\", \"data-v-b193005a\"]]);\nregister(t12, t19);\nconst _sfc_main = {\n  name: \"NcReferencePickerModal\",\n  components: {\n    NcReferencePicker,\n    NcModal,\n    NcButton,\n    ArrowLeftIcon,\n    CloseIcon: IconClose\n  },\n  props: {\n    /**\n     * Provider to select on creation\n     * Show the provider list if no initial one is provided\n     */\n    initialProvider: {\n      type: Object,\n      default: () => null\n    },\n    /**\n     * Focus on the input item on create\n     */\n    focusOnCreate: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * If true, add the modal content to the Viewer trap elements via the event-bus\n     */\n    isInsideViewer: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\n    \"cancel\",\n    \"submit\"\n  ],\n  data() {\n    return {\n      show: true,\n      selectedProvider: this.initialProvider,\n      backButtonTitle: t(\"Back to provider selection\"),\n      closeButtonTitle: t(\"Close\"),\n      closeButtonLabel: t(\"Close Smart Picker\")\n    };\n  },\n  computed: {\n    isProviderSelected() {\n      return this.selectedProvider !== null;\n    },\n    showBackButton() {\n      return this.initialProvider === null && this.isProviderSelected;\n    },\n    modalSize() {\n      return this.isProviderSelected && isCustomPickerElementRegistered(this.selectedProvider.id) ? getCustomPickerElementSize(this.selectedProvider.id) ?? \"large\" : \"normal\";\n    },\n    showModalName() {\n      return !this.isProviderSelected || !isCustomPickerElementRegistered(this.selectedProvider.id);\n    },\n    modalName() {\n      return this.isProviderSelected ? this.selectedProvider.title : t(\"Smart Picker\");\n    }\n  },\n  mounted() {\n    if (this.isInsideViewer) {\n      const elem = this.$refs.modal_content;\n      emit(\"viewer:trapElements:changed\", elem);\n    }\n  },\n  methods: {\n    onCancel() {\n      this.show = false;\n      this.$emit(\"cancel\");\n    },\n    onSubmit(value) {\n      this.show = false;\n      this.$emit(\"submit\", value);\n    },\n    onProviderSelect(provider) {\n      this.selectedProvider = provider;\n      if (provider === null && this.initialProvider !== null) {\n        this.onCancel();\n      }\n    },\n    onBackClicked() {\n      this.$refs.referencePicker.deselectProvider();\n    }\n  }\n};\nconst _hoisted_1 = {\n  ref: \"modal_content\",\n  class: \"reference-picker-modal--content\"\n};\nconst _hoisted_2 = { key: 1 };\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ArrowLeftIcon = resolveComponent(\"ArrowLeftIcon\");\n  const _component_NcButton = resolveComponent(\"NcButton\");\n  const _component_CloseIcon = resolveComponent(\"CloseIcon\");\n  const _component_NcReferencePicker = resolveComponent(\"NcReferencePicker\");\n  const _component_NcModal = resolveComponent(\"NcModal\");\n  return $data.show ? (openBlock(), createBlock(_component_NcModal, {\n    key: 0,\n    size: $options.modalSize,\n    class: \"reference-picker-modal\",\n    onClose: $options.onCancel\n  }, {\n    default: withCtx(() => [\n      createElementVNode(\"div\", _hoisted_1, [\n        $options.showBackButton ? (openBlock(), createBlock(_component_NcButton, {\n          key: 0,\n          \"aria-label\": $data.backButtonTitle,\n          title: $data.backButtonTitle,\n          class: \"back-button\",\n          onClick: $options.onBackClicked\n        }, {\n          icon: withCtx(() => [\n            createVNode(_component_ArrowLeftIcon)\n          ]),\n          _: 1\n        }, 8, [\"aria-label\", \"title\", \"onClick\"])) : createCommentVNode(\"\", true),\n        createVNode(_component_NcButton, {\n          class: \"close-button\",\n          \"aria-label\": $data.closeButtonLabel,\n          title: $data.closeButtonTitle,\n          variant: \"tertiary\",\n          onClick: $options.onCancel\n        }, {\n          icon: withCtx(() => [\n            createVNode(_component_CloseIcon)\n          ]),\n          _: 1\n        }, 8, [\"aria-label\", \"title\", \"onClick\"]),\n        $options.showModalName ? (openBlock(), createElementBlock(\"h2\", _hoisted_2, toDisplayString($options.modalName), 1)) : createCommentVNode(\"\", true),\n        createVNode(_component_NcReferencePicker, {\n          ref: \"referencePicker\",\n          \"initial-provider\": $props.initialProvider,\n          \"focus-on-create\": $props.focusOnCreate,\n          onProviderSelected: $options.onProviderSelect,\n          onSubmit: $options.onSubmit,\n          onCancel: $options.onCancel\n        }, null, 8, [\"initial-provider\", \"focus-on-create\", \"onProviderSelected\", \"onSubmit\", \"onCancel\"])\n      ], 512)\n    ]),\n    _: 1\n  }, 8, [\"size\", \"onClose\"])) : createCommentVNode(\"\", true);\n}\nconst NcReferencePickerModal = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-15018516\"]]);\nasync function getLinkWithPicker(providerId, isInsideViewer) {\n  const modalId = \"referencePickerModal\";\n  const modalElement = document.createElement(\"div\");\n  modalElement.id = modalId;\n  document.body.append(modalElement);\n  const { promise, reject, resolve } = Promise.withResolvers();\n  const initialProvider = providerId && getProvider(providerId) || null;\n  const view = createApp(NcReferencePickerModal, {\n    initialProvider,\n    isInsideViewer,\n    onCancel() {\n      view.unmount();\n      reject(new Error(\"User cancellation\"));\n    },\n    onSubmit(link) {\n      view.unmount();\n      resolve(link);\n    }\n  });\n  view.mount(modalElement);\n  return promise;\n}\nexport {\n  NcReferencePicker as N,\n  anyLinkProviderId as a,\n  getProvider as b,\n  getProviders as c,\n  sortProviders as d,\n  NcReferencePickerModal as e,\n  NcReferenceWidget as f,\n  getLinkWithPicker as g,\n  NcSearch as h,\n  searchProvider as s\n};\n//# sourceMappingURL=referencePickerModal-CseuhGwX.mjs.map\n","<template>\n\t<div class=\"point-picker-content\">\n\t\t<h2>\n\t\t\t{{ t('integration_openstreetmap', 'Map location (by OpenStreetMap)') }}\n\t\t</h2>\n\t\t<!--a v-if=\"currentLink\"\n\t\t\t:href=\"currentLink\"\n\t\t\ttarget=\"_blank\"\n\t\t\tclass=\"preview-link\">\n\t\t\t{{ currentLink }}\n\t\t</a>\n\t\t<span v-else>\n\t\t\t\n\t\t</span-->\n\t\t<NcSearch ref=\"url-input\"\n\t\t\tclass=\"generic-search\"\n\t\t\t:provider=\"provider\"\n\t\t\t:show-empty-content=\"false\"\n\t\t\t:search-placeholder=\"searchPlaceholder\"\n\t\t\t@submit=\"onSearchSubmit\" />\n\t\t<MaplibreMap v-if=\"showMap\"\n\t\t\tclass=\"point-map\"\n\t\t\t:center=\"lastCenter\"\n\t\t\t:zoom=\"lastMapState?.zoom\"\n\t\t\t:pitch=\"lastMapState?.pitch\"\n\t\t\t:bearing=\"lastMapState?.bearing\"\n\t\t\t:map-style=\"lastMapState?.mapStyle\"\n\t\t\t:use-terrain=\"!!lastMapState?.terrain\"\n\t\t\t:use-globe=\"!!lastMapState?.globe\"\n\t\t\t:all-move-events=\"true\"\n\t\t\t@map-state-change=\"onMapStateChange\">\n\t\t\t<template #default=\"{ map }\">\n\t\t\t\t<VMarker v-if=\"currentMarker\"\n\t\t\t\t\t:map=\"map\"\n\t\t\t\t\t:lng-lat=\"currentMarker\" />\n\t\t\t</template>\n\t\t</MaplibreMap>\n\t\t<div class=\"footer\">\n\t\t\t<NcSelect\n\t\t\t\tclass=\"type-select\"\n\t\t\t\t:model-value=\"selectedLinkType\"\n\t\t\t\t:options=\"linkTypesArray\"\n\t\t\t\t:aria-label-combobox=\"t('integration_openstreetmap', 'Link type')\"\n\t\t\t\t:placeholder=\"t('integration_openstreetmap', 'Link type')\"\n\t\t\t\tinput-id=\"extension-select\"\n\t\t\t\t@update:model-value=\"onLinkTypeSelect\" />\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tv-model=\"includeMarker\"\n\t\t\t\tclass=\"marker-checkbox\">\n\t\t\t\t{{ t('integration_openstreetmap', 'Include marker') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t<div class=\"spacer\" />\n\t\t\t<NcButton\n\t\t\t\tclass=\"submit-button\"\n\t\t\t\tvariant=\"primary\"\n\t\t\t\t:disabled=\"currentCenter === null\"\n\t\t\t\t@click=\"onMapSubmit\">\n\t\t\t\t{{ t('integration_openstreetmap', 'Generate location link') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<ArrowRightIcon />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ArrowRightIcon from 'vue-material-design-icons/ArrowRight.vue'\n\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcSelect from '@nextcloud/vue/components/NcSelect'\n\nimport MaplibreMap from '../components/map/MaplibreMap.vue'\nimport VMarker from '../components/map/VMarker.vue'\n\nimport { getProvider, NcSearch } from '@nextcloud/vue/components/NcRichText'\n\nimport { getLastMapState, setLastMapState } from '../lastMapStateHelper.js'\n\nconst linkTypes = {\n\tosm: {\n\t\tid: 'osm',\n\t\tlabel: t('integration_openstreetmap', 'OpenStreetMap'),\n\t},\n\tosmand: {\n\t\tid: 'osmand',\n\t\tlabel: t('integration_openstreetmap', 'OsmAnd'),\n\t},\n\tgoogle: {\n\t\tid: 'google',\n\t\tlabel: t('integration_openstreetmap', 'Google maps'),\n\t},\n}\nconst linkTypesArray = Object.keys(linkTypes).map(typeId => linkTypes[typeId])\n\nexport default {\n\tname: 'PointCustomPickerElement',\n\n\tcomponents: {\n\t\tVMarker,\n\t\tMaplibreMap,\n\t\tNcButton,\n\t\tNcSearch,\n\t\tNcSelect,\n\t\tNcCheckboxRadioSwitch,\n\t\tArrowRightIcon,\n\t},\n\n\tprops: {\n\t\tproviderId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\taccessible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tprovider: getProvider(this.providerId),\n\t\t\tcurrentCenter: null,\n\t\t\tcurrentZoom: null,\n\t\t\tcurrentPitch: getLastMapState()?.pitch ?? null,\n\t\t\tcurrentBearing: getLastMapState()?.bearing ?? null,\n\t\t\tcurrentMapStyle: getLastMapState()?.mapStyle ?? null,\n\t\t\tcurrentMapTerrain: !!getLastMapState()?.terrain,\n\t\t\tcurrentMapGlobe: !!getLastMapState()?.globe,\n\t\t\tselectedLinkTypeId: getLastMapState()?.linkType ? getLastMapState().linkType : linkTypes.osm.id,\n\t\t\tshowMap: false,\n\t\t\tlastMapState: getLastMapState(),\n\t\t\tsearchPlaceholder: t('integration_openstreetmap', 'Search with Nominatim to get an OpenStreetMap link'),\n\t\t\tincludeMarker: true,\n\t\t\tlinkTypesArray,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tselectedLinkType() {\n\t\t\treturn linkTypes[this.selectedLinkTypeId] ?? null\n\t\t},\n\t\tlastCenter() {\n\t\t\tif (this.lastMapState?.lat && this.lastMapState?.lon) {\n\t\t\t\treturn {\n\t\t\t\t\tlat: this.lastMapState.lat,\n\t\t\t\t\tlon: this.lastMapState.lon,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\tcurrentMarker() {\n\t\t\treturn this.includeMarker\n\t\t\t\t? this.currentCenter\n\t\t\t\t\t? this.currentCenter\n\t\t\t\t\t: this.lastCenter\n\t\t\t\t: undefined\n\t\t},\n\t\tcurrentLink() {\n\t\t\tif (this.currentCenter === null) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tconst lat = this.currentCenter.lat\n\t\t\tconst lon = this.currentCenter.lon\n\t\t\tconst zoom = this.currentZoom\n\n\t\t\tlet link\n\t\t\tconst fragments = []\n\t\t\tconst queryParams = []\n\t\t\tif (this.selectedLinkTypeId === null || this.selectedLinkTypeId === linkTypes.osm.id) {\n\t\t\t\tlink = 'https://www.openstreetmap.org/'\n\t\t\t\tif (this.includeMarker) {\n\t\t\t\t\tqueryParams.push('mlat=' + lat)\n\t\t\t\t\tqueryParams.push('mlon=' + lon)\n\t\t\t\t}\n\t\t\t\tfragments.push('map=' + zoom + '/' + lat + '/' + lon)\n\t\t\t} else if (this.selectedLinkTypeId === linkTypes.osmand.id) {\n\t\t\t\tlink = 'https://osmand.net/map/'\n\t\t\t\tif (this.includeMarker) {\n\t\t\t\t\tqueryParams.push('pin=' + lat + ',' + lon)\n\t\t\t\t}\n\t\t\t\tfragments.push(zoom + '/' + lat + '/' + lon)\n\t\t\t} else if (this.selectedLinkTypeId === linkTypes.google.id) {\n\t\t\t\tlink = 'https://maps.google.com/maps'\n\t\t\t\tif (this.includeMarker) {\n\t\t\t\t\tqueryParams.push('q=' + lat + ',' + lon)\n\t\t\t\t}\n\t\t\t\tqueryParams.push('ll=' + lat + ',' + lon)\n\t\t\t\tqueryParams.push('z=' + zoom)\n\t\t\t}\n\n\t\t\tif (parseInt(this.currentPitch) !== 0) {\n\t\t\t\tfragments.push('pitch=' + parseInt(this.currentPitch))\n\t\t\t}\n\t\t\tif (parseInt(this.currentBearing) !== 0) {\n\t\t\t\tfragments.push('bearing=' + parseInt(this.currentBearing))\n\t\t\t}\n\t\t\tif (this.currentMapStyle !== 'streets') {\n\t\t\t\tfragments.push('style=' + encodeURIComponent(this.currentMapStyle))\n\t\t\t}\n\t\t\tif (this.currentMapTerrain) {\n\t\t\t\tfragments.push('terrain')\n\t\t\t}\n\t\t\tif (this.currentMapGlobe) {\n\t\t\t\tfragments.push('globe')\n\t\t\t}\n\n\t\t\tif (queryParams.length > 0) {\n\t\t\t\tlink += '?' + queryParams.join('&')\n\t\t\t}\n\t\t\tif (fragments.length > 0) {\n\t\t\t\tlink += '#' + fragments.join('&')\n\t\t\t}\n\n\t\t\treturn link\n\t\t},\n\t},\n\n\twatch: {\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.showMap = true\n\t\t})\n\t},\n\n\tmethods: {\n\t\tonLinkTypeSelect(selected) {\n\t\t\tthis.selectedLinkTypeId = selected?.id ?? null\n\t\t},\n\t\tonMapSubmit() {\n\t\t\tconst lat = this.currentCenter.lat\n\t\t\tconst lon = this.currentCenter.lon\n\t\t\tconst zoom = this.currentZoom\n\t\t\tconst pitch = this.currentPitch\n\t\t\tconst bearing = this.currentBearing ? parseFloat(this.currentBearing.toFixed(2)) : this.currentBearing\n\t\t\tconst mapStyle = this.currentMapStyle\n\t\t\tconst terrain = this.currentMapTerrain ? '1' : ''\n\t\t\tconst globe = this.currentMapGlobe ? '1' : ''\n\t\t\tconst linkType = this.selectedLinkTypeId\n\t\t\tsetLastMapState({ lat, lon, zoom, pitch, bearing, mapStyle, terrain, globe, linkType })\n\t\t\tthis.$el.dispatchEvent(new CustomEvent('submit', { detail: this.currentLink, bubbles: true }))\n\t\t},\n\t\tonSearchSubmit(link) {\n\t\t\tsetLastMapState({ mapStyle: this.currentMapStyle })\n\t\t\tconst fragments = []\n\t\t\tfragments.push('style=' + encodeURIComponent(this.currentMapStyle))\n\t\t\tconst finalLink = link + '#' + fragments.join('&')\n\t\t\tthis.$el.dispatchEvent(new CustomEvent('submit', { detail: finalLink, bubbles: true }))\n\t\t},\n\t\tonMapStateChange(e) {\n\t\t\tif (e.centerLat !== undefined && e.centerLng !== undefined) {\n\t\t\t\tthis.currentCenter = {\n\t\t\t\t\tlat: parseFloat(e.centerLat.toFixed(6)),\n\t\t\t\t\tlon: parseFloat(e.centerLng.toFixed(6)),\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.zoom !== undefined) {\n\t\t\t\tthis.currentZoom = Math.floor(e.zoom)\n\t\t\t}\n\t\t\tif (e.pitch !== undefined) {\n\t\t\t\tthis.currentPitch = e.pitch\n\t\t\t}\n\t\t\tif (e.bearing !== undefined) {\n\t\t\t\tthis.currentBearing = e.bearing\n\t\t\t}\n\t\t\tif (e.mapStyle !== undefined) {\n\t\t\t\tthis.currentMapStyle = e.mapStyle\n\t\t\t}\n\t\t\tif ([true, false].includes(e.terrain)) {\n\t\t\t\tthis.currentMapTerrain = e.terrain\n\t\t\t}\n\t\t\tif ([true, false].includes(e.globe)) {\n\t\t\t\tthis.currentMapGlobe = e.globe\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n// TODO fix this in nc/vue\n.modal-container__content .reference-picker-modal--content {\n\theight: 100%;\n}\n</style>\n\n<style scoped lang=\"scss\">\n.point-picker-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 12px 16px 12px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-top: 0;\n\t}\n\n\t.generic-search {\n\t\tmargin-bottom: 12px;\n\t\tpadding: 0 !important;\n\t\twidth: 100%;\n\t}\n\n\t.point-map {\n\t\twidth: 100%;\n\t\theight: 2000px;\n\n\t\t:deep(.maplibregl-map) {\n\t\t\tborder-radius: var(--border-radius-large);\n\t\t}\n\t}\n\n\t.preview-link {\n\t\tmargin-bottom: 8px;\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\n\t.footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tmargin-top: 8px;\n\t\talign-items: center;\n\t\tgap: 8px;\n\n\t\t.marker-checkbox {\n\t\t\tmargin-left: 16px;\n\t\t}\n\n\t\t.type-select {\n\t\t\tmargin: 0;\n\t\t}\n\t}\n}\n</style>\n"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_sfc_main","defineComponent","__props","nameId","createElementId","_ctx","_cache","openBlock","createElementBlock","unref","renderSlot","createCommentVNode","createTextVNode","toDisplayString","NcEmptyContent","_export_sfc","_sfc_main$7","_hoisted_1$7","_hoisted_2$6","_hoisted_3$5","_hoisted_4$4","_sfc_render$6","$props","$setup","$data","$options","mergeProps","$event","createElementVNode","LinkVariantIcon","register","t8","anyLinkProviderId","anyLinkProvider","t","imagePath","loadState","getProvider","providerId","getProviders","p","keep","isCustomPickerElementRegistered","logger","t39","t44","isUrl","str","t24","_sfc_main$3","_sfc_main$a","_hoisted_1$3","_hoisted_2$2","_hoisted_3$1","_hoisted_4$1","_hoisted_5$1","_sfc_render$3","_component_NcHighlight","resolveComponent","normalizeClass","createVNode","NcSearchResult","t31","t41","LIMIT","_sfc_main$2","IconDotsHorizontal","NcSelect","options","results","pid","providerEntriesWithId","entry","index","debounce","resultsBySearchProvider","query","item","searchProviderId","searchPromises","promises","cursor","url","generateOcsUrl","axios","response","data","_hoisted_1$2","_hoisted_2$1","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_sfc_render$2","_component_LinkVariantIcon","_component_NcSearchResult","_component_DotsHorizontalIcon","_component_NcSelect","_component_NcEmptyContent","withCtx","option","createBlock","NcSearch","t12","t19","linkTypes","linkTypesArray","typeId","VMarker","MaplibreMap","NcButton","NcCheckboxRadioSwitch","ArrowRightIcon","getLastMapState","lat","lon","zoom","link","fragments","queryParams","selected","pitch","bearing","mapStyle","terrain","globe","linkType","setLastMapState","finalLink","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_NcSearch","_createBlock","_component_MaplibreMap","_withCtx","map","_component_VMarker","_component_NcCheckboxRadioSwitch","_component_NcButton","_component_ArrowRightIcon","_createTextVNode","_toDisplayString"],"mappings":"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","x_google_ignoreList":[0,1]}