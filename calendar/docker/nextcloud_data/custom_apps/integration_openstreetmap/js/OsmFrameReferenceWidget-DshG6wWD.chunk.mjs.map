{"version":3,"file":"OsmFrameReferenceWidget-DshG6wWD.chunk.mjs","sources":["../src/views/OsmFrameReferenceWidget.vue"],"sourcesContent":["<!--\n  - @copyright Copyright (c) 2023 Julien Veyssier <julien-nc@posteo.net>\n  -\n  - @author 2023 Julien Veyssier <julien-nc@posteo.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"location-reference\">\n\t\t<div class=\"location\">\n\t\t\t<a class=\"location--link\"\n\t\t\t\t:href=\"richObject.url\"\n\t\t\t\ttarget=\"_blank\">\n\t\t\t\t<strong class=\"location--name\">\n\t\t\t\t\t{{ richObject.display_name }}\n\t\t\t\t</strong>\n\t\t\t</a>\n\t\t\t<iframe\n\t\t\t\tclass=\"location--map-frame\"\n\t\t\t\tframeborder=\"0\"\n\t\t\t\tscrolling=\"no\"\n\t\t\t\tmarginheight=\"0\"\n\t\t\t\tmarginwidth=\"0\"\n\t\t\t\t:src=\"frameUrl\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { getBBFromCenterZoom } from '../mapUtils.js'\n\nexport default {\n\tname: 'OsmFrameReferenceWidget',\n\n\tcomponents: {\n\t},\n\n\tprops: {\n\t\trichObjectType: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\trichObject: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\taccessible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tframeUrl() {\n\t\t\tconst center = this.richObject.map_center\n\t\t\tconst zoom = this.richObject.zoom\n\t\t\tconst marker = this.richObject.marker_coordinates\n\t\t\tconst markerLatLon = marker\n\t\t\t\t? marker.lat + ',' + marker.lon\n\t\t\t\t: null\n\n\t\t\t// <iframe width=\"425\" height=\"350\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\"https://www.openstreetmap.org/export/embed.html?bbox=4.5333194732666025%2C44.70715721664363%2C4.613656997680665%2C44.74807432587679&amp;layer=mapnik&amp;marker=44.72761938925528%2C4.573488235473633\" style=\"border: 1px solid black\"></iframe><br/><small><a href=\"https://www.openstreetmap.org/?mlat=44.7276&amp;mlon=4.5735#map=14/44.7276/4.5735\">Afficher une carte plus grande</a></small>\n\t\t\t// https://www.openstreetmap.org/export/embed.html?bbox=4.5333194732666025%2C44.70715721664363%2C4.613656997680665%2C44.74807432587679&amp;layer=mapnik\n\t\t\tconst bb = center\n\t\t\t\t? getBBFromCenterZoom(center.lat, center.lon, zoom)\n\t\t\t\t: this.richObject.boundingbox\n\n\t\t\tconst bbp = [bb[2], bb[0], bb[3], bb[1]].join(',')\n\t\t\treturn 'https://www.openstreetmap.org/export/embed.html?'\n\t\t\t\t+ 'bbox=' + encodeURIComponent(bbp)\n\t\t\t\t+ (markerLatLon ? ('&marker=' + encodeURIComponent(markerLatLon)) : '')\n\t\t},\n\t},\n\n\tmethods: {\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.location-reference {\n\twidth: 100%;\n\t// padding: 12px;\n\twhite-space: normal;\n\n\t.location {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t// in case there is an absolute inside\n\t\tposition: relative;\n\n\t\t&--link {\n\t\t\tpadding: 10px;\n\t\t\t&:hover {\n\t\t\t\tcolor: #58a6ff !important;\n\t\t\t}\n\t\t}\n\n\t\t&--map-frame {\n\t\t\twidth: 100%;\n\t\t\theight: 350px;\n\t\t}\n\t}\n}\n</style>\n"],"names":["_sfc_main","center","zoom","marker","markerLatLon","bb","getBBFromCenterZoom","bbp","_hoisted_1","_hoisted_2","_hoisted_4","_openBlock","_createElementBlock","_createElementVNode","$props","_toDisplayString","$options"],"mappings":"2NA6CA,MAAKA,EAAU,CACd,KAAM,0BAEN,WAAY,GAGZ,MAAO,CACN,eAAgB,CACf,KAAM,OACN,QAAS,IAEV,WAAY,CACX,KAAM,OACN,QAAS,MAEV,WAAY,CACX,KAAM,QACN,QAAS,KAIX,MAAO,CACN,MAAO,CACP,CACD,EAEA,SAAU,CACT,UAAW,CACV,MAAMC,EAAS,KAAK,WAAW,WACzBC,EAAO,KAAK,WAAW,KACvBC,EAAS,KAAK,WAAW,mBACzBC,EAAeD,EAClBA,EAAO,IAAM,IAAMA,EAAO,IAC1B,KAIGE,EAAKJ,EACRK,EAAoBL,EAAO,IAAKA,EAAO,IAAKC,CAAI,EAChD,KAAK,WAAW,YAEbK,EAAM,CAACF,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,CAAC,EAAE,KAAK,GAAG,EACjD,MAAO,wDACM,mBAAmBE,CAAG,GAC/BH,EAAgB,WAAa,mBAAmBA,CAAY,EAAK,GACtE,GAGD,QAAS,EAEV,EAzEMI,EAAA,CAAA,MAAM,oBAAoB,EACzBC,EAAA,CAAA,MAAM,UAAU,aAIXC,EAAA,CAAA,MAAM,gBAAgB,oCALjC,OAAAC,EAAA,EAAAC,EAiBM,MAjBNJ,EAiBM,CAhBLK,EAeM,MAfNJ,EAeM,CAdLI,EAMI,IAAA,CAND,MAAM,iBACP,KAAMC,EAAA,WAAW,IAClB,OAAO,WACPD,EAES,SAFTH,EAESK,EADLD,EAAA,WAAW,YAAY,EAAA,CAAA,QAG5BD,EAMmB,SAAA,CALlB,MAAM,sBACN,YAAY,IACZ,UAAU,KACV,aAAa,IACb,YAAY,IACX,IAAKG,EAAA"}