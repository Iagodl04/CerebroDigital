{"version":3,"file":"integration_openstreetmap-personalSettings.mjs","sources":["../node_modules/@nextcloud/vue/dist/chunks/NcNoteCard-BomepG0z.mjs","../src/components/PersonalSettings.vue","../src/personalSettings.js"],"sourcesContent":["import '../assets/NcNoteCard-l5nIN9Hg.css';\nimport { defineComponent, computed, createElementBlock, openBlock, normalizeClass, unref, renderSlot, createElementVNode, createVNode, createCommentVNode, toDisplayString } from \"vue\";\nimport { f as mdiAlert, g as mdiInformation, h as mdiCheckboxMarkedCircle, i as mdiAlertDecagram } from \"./mdi-Cjx8NyEs.mjs\";\nimport { i as isLegacy } from \"./legacy-DcjXBL_t.mjs\";\nimport { N as NcIconSvgWrapper } from \"./NcIconSvgWrapper-5AA93z-F.mjs\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\nconst _hoisted_1 = [\"role\"];\nconst _hoisted_2 = {\n  key: 0,\n  class: \"notecard__heading\"\n};\nconst _hoisted_3 = { class: \"notecard__text\" };\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"NcNoteCard\",\n  props: {\n    heading: { default: void 0 },\n    showAlert: { type: Boolean },\n    text: { default: void 0 },\n    type: { default: \"warning\" }\n  },\n  setup(__props) {\n    const props = __props;\n    const shouldShowAlert = computed(() => props.showAlert || props.type === \"error\");\n    const iconPath = computed(() => {\n      switch (props.type) {\n        case \"error\":\n          return mdiAlertDecagram;\n        case \"success\":\n          return mdiCheckboxMarkedCircle;\n        case \"info\":\n          return mdiInformation;\n        case \"warning\":\n        default:\n          return mdiAlert;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\"notecard\", {\n          [`notecard--${_ctx.type}`]: _ctx.type,\n          \"notecard--legacy\": unref(isLegacy)\n        }]),\n        role: shouldShowAlert.value ? \"alert\" : \"note\"\n      }, [\n        renderSlot(_ctx.$slots, \"icon\", {}, () => [\n          createVNode(unref(NcIconSvgWrapper), {\n            path: iconPath.value,\n            class: normalizeClass([\"notecard__icon\", { \"notecard__icon--heading\": _ctx.heading }]),\n            inline: \"\"\n          }, null, 8, [\"path\", \"class\"])\n        ], true),\n        createElementVNode(\"div\", null, [\n          _ctx.heading ? (openBlock(), createElementBlock(\"p\", _hoisted_2, toDisplayString(_ctx.heading), 1)) : createCommentVNode(\"\", true),\n          renderSlot(_ctx.$slots, \"default\", {}, () => [\n            createElementVNode(\"p\", _hoisted_3, toDisplayString(_ctx.text), 1)\n          ], true)\n        ])\n      ], 10, _hoisted_1);\n    };\n  }\n});\nconst NcNoteCard = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-dfa67081\"]]);\nexport {\n  NcNoteCard as N\n};\n//# sourceMappingURL=NcNoteCard-BomepG0z.mjs.map\n","<template>\n\t<div id=\"osm_prefs\" class=\"section\">\n\t\t<h2>\n\t\t\t<OsmIcon class=\"icon\" />\n\t\t\t{{ t('integration_openstreetmap', 'OpenStreetMap integration') }}\n\t\t</h2>\n\t\t<div id=\"osm-content\">\n\t\t\t<div id=\"osm-search-block\">\n\t\t\t\t<NcNoteCard v-if=\"state.search_location_enabled && state.admin_search_location_enabled\"\n\t\t\t\t\ttype=\"info\">\n\t\t\t\t\t{{ t('integration_openstreetmap', 'Warning, everything you type in the Unified Search menu will be sent to OpenStreetMap\\'s Nominatim service.') }}\n\t\t\t\t</NcNoteCard>\n\t\t\t\t<NcNoteCard v-if=\"state.admin_search_location_enabled === false\"\n\t\t\t\t\ttype=\"info\">\n\t\t\t\t\t{{ t('integration_tmdb', 'An administrator has disabled the OpenStreetMap Unified Search provider') }}\n\t\t\t\t</NcNoteCard>\n\t\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\t\t:model-value=\"state.search_location_enabled && state.admin_search_location_enabled\"\n\t\t\t\t\t:disabled=\"!state.admin_search_location_enabled\"\n\t\t\t\t\t@update:model-value=\"onCheckboxChanged($event, 'search_location_enabled')\">\n\t\t\t\t\t{{ t('integration_openstreetmap', 'Enable searching for locations') }}\n\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\t\t:model-value=\"state.link_preview_enabled\"\n\t\t\t\t\t@update:model-value=\"onCheckboxChanged($event, 'link_preview_enabled')\">\n\t\t\t\t\t{{ t('integration_openstreetmap', 'Enable OpenStreetMap link previews') }}\n\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t<NcCheckboxRadioSwitch v-if=\"state.link_preview_enabled\"\n\t\t\t\t\t:model-value=\"state.prefer_simple_osm_iframe\"\n\t\t\t\t\t@update:model-value=\"onCheckboxChanged($event, 'prefer_simple_osm_iframe')\">\n\t\t\t\t\t{{ t('integration_openstreetmap', 'Prefer simple OpenStreetMap frame') }}\n\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t</div>\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\t:model-value=\"state.navigation_enabled\"\n\t\t\t\t@update:model-value=\"onCheckboxChanged($event, 'navigation_enabled')\">\n\t\t\t\t{{ t('integration_openstreetmap', 'Enable navigation link') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport OsmIcon from './icons/OsmIcon.vue'\n\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard'\n\nimport { loadState } from '@nextcloud/initial-state'\nimport { generateUrl } from '@nextcloud/router'\nimport axios from '@nextcloud/axios'\nimport { showSuccess, showError } from '@nextcloud/dialogs'\nimport '@nextcloud/dialogs/style.css'\n\nexport default {\n\tname: 'PersonalSettings',\n\n\tcomponents: {\n\t\tOsmIcon,\n\t\tNcCheckboxRadioSwitch,\n\t\tNcNoteCard,\n\t},\n\n\tprops: [],\n\n\tdata() {\n\t\treturn {\n\t\t\tstate: loadState('integration_openstreetmap', 'user-config'),\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t},\n\n\twatch: {\n\t},\n\n\tmounted() {\n\t},\n\n\tmethods: {\n\t\tonCheckboxChanged(newValue, key) {\n\t\t\tthis.state[key] = newValue\n\t\t\tthis.saveOptions({ [key]: this.state[key] ? '1' : '0' })\n\t\t},\n\t\tsaveOptions(values) {\n\t\t\tconst req = {\n\t\t\t\tvalues,\n\t\t\t}\n\t\t\tconst url = generateUrl('/apps/integration_openstreetmap/config')\n\t\t\taxios.put(url, req).then((response) => {\n\t\t\t\tshowSuccess(t('integration_openstreetmap', 'OpenStreetMap options saved'))\n\t\t\t}).catch((error) => {\n\t\t\t\tshowError(\n\t\t\t\t\tt('integration_openstreetmap', 'Failed to save OpenStreetMap options')\n\t\t\t\t\t+ ': ' + (error.response?.data?.error ?? ''),\n\t\t\t\t)\n\t\t\t\tconsole.debug(error)\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n#osm_prefs {\n\t#osm-content {\n\t\tmargin: 16px 0 0 40px;\n\t}\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: start;\n\t\t.icon {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t}\n}\n</style>\n","/**\n * Nextcloud - OpenStreetMap\n *\n *\n * This file is licensed under the Affero General Public License version 3 or\n * later. See the COPYING file.\n *\n * @author Julien Veyssier <julien-nc@posteo.net>\n * @copyright Julien Veyssier 2023\n */\n\nimport { createApp } from 'vue'\nimport PersonalSettings from './components/PersonalSettings.vue'\n\nconst app = createApp(PersonalSettings)\napp.mixin({ methods: { t, n } })\napp.mount('#osm_prefs')\n"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_sfc_main","defineComponent","__props","props","shouldShowAlert","computed","iconPath","mdiAlertDecagram","mdiCheckboxMarkedCircle","mdiInformation","mdiAlert","_ctx","_cache","openBlock","createElementBlock","normalizeClass","unref","isLegacy","renderSlot","createVNode","NcIconSvgWrapper","createElementVNode","toDisplayString","createCommentVNode","NcNoteCard","_export_sfc","OsmIcon","NcCheckboxRadioSwitch","loadState","newValue","key","values","req","url","generateUrl","axios","response","showSuccess","error","showError","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_OsmIcon","_createTextVNode","$data","_createBlock","_component_NcNoteCard","_component_NcCheckboxRadioSwitch","$event","$options","app","createApp","PersonalSettings"],"mappings":"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","x_google_ignoreList":[0]}