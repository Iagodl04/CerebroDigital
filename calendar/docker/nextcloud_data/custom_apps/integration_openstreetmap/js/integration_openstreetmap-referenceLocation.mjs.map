{"version":3,"mappings":"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","names":["id","callback","onDestroy","props","registerWidget","propsWithDefaults","logger","registerCustomPickerElement","NcCustomPickerRenderResult","element","object","isCustomPickerElementRegistered","size","el","richObjectType","richObject","accessible","createApp","__vitePreload","MaplibreRouteReferenceWidget","app","loadState","preferOsmFrame","ReferenceWidgetComponent","OsmFrameReferenceWidget","MaplibreLocationReferenceWidget","providerId","PointCustomPickerElement","renderResult","DirectionCustomPickerElement"],"ignoreList":[0],"sources":["../node_modules/@nextcloud/vue/dist/chunks/customPickerElements-4pQTZUnk.mjs","../src/referenceLocation.js"],"sourcesContent":["import { l as logger } from \"./logger-D3RVzcfQ.mjs\";\nwindow._vue_richtext_widgets ??= {};\nwindow._registerWidget ??= (id, callback, onDestroy, props) => {\n  registerWidget(id, callback, onDestroy, props);\n};\nfunction registerWidget(id, callback, onDestroy = () => {\n}, props) {\n  const propsWithDefaults = {\n    hasInteractiveView: true,\n    fullWidth: false,\n    ...props\n  };\n  if (window._vue_richtext_widgets[id]) {\n    logger.error(`[ReferencePicker]: Widget for id ${id} already registered`);\n    return;\n  }\n  window._vue_richtext_widgets[id] = {\n    id,\n    callback,\n    onDestroy,\n    ...propsWithDefaults\n  };\n}\nfunction renderWidget(el, options) {\n  const { richObjectType, richObject, accessible, interactive } = options;\n  if (richObjectType === \"open-graph\") {\n    return;\n  }\n  if (!window._vue_richtext_widgets[richObjectType]) {\n    logger.error(\"Widget for rich object type \" + richObjectType + \" not registered\");\n    return;\n  }\n  window._vue_richtext_widgets[richObjectType].callback(el, { richObjectType, richObject, accessible, interactive });\n}\nfunction destroyWidget(richObjectType, el) {\n  if (richObjectType === \"open-graph\") {\n    return;\n  }\n  if (!window._vue_richtext_widgets[richObjectType]) {\n    return;\n  }\n  window._vue_richtext_widgets[richObjectType].onDestroy(el);\n}\nfunction isWidgetRegistered(id) {\n  return !!window._vue_richtext_widgets[id];\n}\nfunction hasInteractiveView(id) {\n  return !!window._vue_richtext_widgets[id]?.hasInteractiveView;\n}\nfunction hasFullWidth(id) {\n  return !!window._vue_richtext_widgets[id]?.fullWidth;\n}\nwindow._vue_richtext_custom_picker_elements ??= {};\nwindow._registerCustomPickerElement ??= registerCustomPickerElement;\nclass NcCustomPickerRenderResult {\n  element;\n  object;\n  /**\n   * @param element - The HTML element\n   * @param object - The object\n   */\n  constructor(element, object) {\n    this.element = element;\n    this.object = object;\n  }\n}\nfunction isCustomPickerElementRegistered(id) {\n  return !!window._vue_richtext_custom_picker_elements[id];\n}\nfunction getCustomPickerElementSize(id) {\n  const size = window._vue_richtext_custom_picker_elements[id]?.size;\n  if (size && [\"small\", \"normal\", \"large\", \"full\"].includes(size)) {\n    return size;\n  }\n  return null;\n}\nfunction registerCustomPickerElement(id, callback, onDestroy = () => {\n}, size = \"large\") {\n  if (window._vue_richtext_custom_picker_elements[id]) {\n    logger.error(`Custom reference picker element for id ${id} already registered`);\n    return;\n  }\n  window._vue_richtext_custom_picker_elements[id] = {\n    id,\n    callback,\n    onDestroy,\n    size\n  };\n}\nfunction renderCustomPickerElement(el, options) {\n  const { providerId, accessible } = options;\n  if (!window._vue_richtext_custom_picker_elements[providerId]) {\n    logger.error(`Custom reference picker element for reference provider ID ${providerId} not registered`);\n    return;\n  }\n  return window._vue_richtext_custom_picker_elements[providerId].callback(el, { providerId, accessible });\n}\nfunction destroyCustomPickerElement(providerId, el, renderResult) {\n  if (!window._vue_richtext_custom_picker_elements[providerId]) {\n    return;\n  }\n  window._vue_richtext_custom_picker_elements[providerId].onDestroy(el, renderResult);\n}\nexport {\n  NcCustomPickerRenderResult as N,\n  renderWidget as a,\n  destroyCustomPickerElement as b,\n  isCustomPickerElementRegistered as c,\n  destroyWidget as d,\n  registerCustomPickerElement as e,\n  renderCustomPickerElement as f,\n  getCustomPickerElementSize as g,\n  hasInteractiveView as h,\n  isWidgetRegistered as i,\n  hasFullWidth as j,\n  registerWidget as r\n};\n//# sourceMappingURL=customPickerElements-4pQTZUnk.mjs.map\n","/**\n * @copyright Copyright (c) 2023 Julien Veyssier <julien-nc@posteo.net>\n *\n * @author Julien Veyssier <julien-nc@posteo.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { registerWidget, registerCustomPickerElement, NcCustomPickerRenderResult } from '@nextcloud/vue/components/NcRichText'\n\nregisterWidget('integration_openstreetmap_route', async (el, { richObjectType, richObject, accessible }) => {\n\tconst { createApp } = await import('vue')\n\tconst { default: MaplibreRouteReferenceWidget } = await import('./views/MaplibreRouteReferenceWidget.vue')\n\n\tconst app = createApp(\n\t\tMaplibreRouteReferenceWidget,\n\t\t{\n\t\t\trichObjectType,\n\t\t\trichObject,\n\t\t\taccessible,\n\t\t},\n\t)\n\tapp.mixin({ methods: { t, n } })\n\tapp.mount(el)\n}, () => {}, { hasInteractiveView: false })\n\nregisterWidget('integration_openstreetmap_location', async (el, { richObjectType, richObject, accessible }) => {\n\tconst { createApp } = await import('vue')\n\tconst { loadState } = await import('@nextcloud/initial-state')\n\tconst preferOsmFrame = loadState('integration_openstreetmap', 'prefer-osm-frame')\n\tlet ReferenceWidgetComponent\n\tif (preferOsmFrame) {\n\t\tconst { default: OsmFrameReferenceWidget } = await import('./views/OsmFrameReferenceWidget.vue')\n\t\tReferenceWidgetComponent = OsmFrameReferenceWidget\n\t} else {\n\t\tconst { default: MaplibreLocationReferenceWidget } = await import('./views/MaplibreLocationReferenceWidget.vue')\n\t\tReferenceWidgetComponent = MaplibreLocationReferenceWidget\n\t}\n\n\tconst app = createApp(\n\t\tReferenceWidgetComponent,\n\t\t{\n\t\t\trichObjectType,\n\t\t\trichObject,\n\t\t\taccessible,\n\t\t},\n\t)\n\tapp.mixin({ methods: { t, n } })\n\tapp.mount(el)\n}, () => {}, { hasInteractiveView: false })\n\nregisterCustomPickerElement('openstreetmap-point', async (el, { providerId, accessible }) => {\n\tconst { createApp } = await import('vue')\n\tconst { default: PointCustomPickerElement } = await import('./views/PointCustomPickerElement.vue')\n\n\tconst app = createApp(\n\t\tPointCustomPickerElement,\n\t\t{\n\t\t\tproviderId,\n\t\t\taccessible,\n\t\t},\n\t)\n\tapp.mixin({ methods: { t, n } })\n\tapp.mount(el)\n\n\treturn new NcCustomPickerRenderResult(el, app)\n}, (el, renderResult) => {\n\trenderResult.object.unmount()\n})\n\nregisterCustomPickerElement('openstreetmap-direction', async (el, { providerId, accessible }) => {\n\tconst { createApp } = await import('vue')\n\tconst { default: DirectionCustomPickerElement } = await import('./views/DirectionCustomPickerElement.vue')\n\n\tconst app = createApp(\n\t\tDirectionCustomPickerElement,\n\t\t{\n\t\t\tproviderId,\n\t\t\taccessible,\n\t\t},\n\t)\n\tapp.mixin({ methods: { t, n } })\n\tapp.mount(el)\n\n\treturn new NcCustomPickerRenderResult(el, app)\n}, (el, renderResult) => {\n\trenderResult.object.unmount()\n})\n"],"file":"integration_openstreetmap-referenceLocation.mjs"}